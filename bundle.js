/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/Animation.js":
/*!**************************!*\
  !*** ./src/Animation.js ***!
  \**************************/
/*! exports provided: Animation2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Animation2\", function() { return Animation2; });\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main */ \"./src/main.js\");\n/**\n * Animation\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2015-01-01\n */\n\n\n\n\n\n// TODO: make frameTime milliseconds of each frame!\nfunction Animation2(sheet, frameTime, sequence, stop) {\n\tthis.sheet = sheet;\n\tthis.frameTime = frameTime;\n\tthis.sequence = sequence;\n\tthis.stop = stop || false;\n\tthis.startTime = _main__WEBPACK_IMPORTED_MODULE_0__[\"timer\"].now;\n\tthis.animSheetX = 0;\n\tthis.animSheetY = 0;\n\tthis.flipx = false;\n\tthis.flipy = false;\n\tthis.noAnimation = sequence.length == 1 ? true : false;\n\n\tif(this.noAnimation) {\n\t\tthis.currentIndex = this.sequence[0];\n\n\t\t// var xposition = currentIndex % 16;\n\t\t// using binary AND to compute modulo 16\n\t\tthis.xposition = this.currentIndex & 15;\n\t\tthis.yposition = (this.currentIndex / 16) | 0;\n\n\t\tthis.animSheetX = this.xposition * this.sheet.width;\n\t\tthis.animSheetY = this.yposition * this.sheet.height\n\t}\n};\n\nAnimation2.prototype.update = function() {\n\n\tif(this.noAnimation)\n\t\treturn;\n\n\tthis.frameNumber;\n\n\tif(this.stop) {\n\t\tthis.frameNumber = Math.min((Math.max((_main__WEBPACK_IMPORTED_MODULE_0__[\"timer\"].now - this.startTime), 0) * this.frameTime) | 0, this.sequence.length-1);\n\t} else {\n\t\tthis.frameNumber = (((_main__WEBPACK_IMPORTED_MODULE_0__[\"timer\"].now - this.startTime) * this.frameTime) % this.sequence.length) | 0;\n\t}\n\n\tthis.currentIndex = this.sequence[this.frameNumber];\n\n\t// var xposition = currentIndex % 16;\n\t// using binary AND to compute modulo 16\n\tthis.xposition = this.currentIndex & 15;\n\tthis.yposition = (this.currentIndex / 16) | 0;\n\n\tthis.animSheetX = this.xposition * this.sheet.width;\n\tthis.animSheetY = this.yposition * this.sheet.height\n};\n\nAnimation2.prototype.rewind = function() {\n\tthis.startTime = _main__WEBPACK_IMPORTED_MODULE_0__[\"timer\"].now;\n\treturn this;\n};\n\nAnimation2.prototype.setStartTime = function(time) {\n\tthis.startTime = time;\n\treturn this;\n};\n\nAnimation2.prototype.draw = function(x, y) {\n\t// TODO: change context to pge.system.context\n\t// Date.now() is 3 times faster than new Date().getTime\n\n\tif(this.flipx || this.flipy) {\n\t\t_main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].save();\n\t\t_main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].translate((x+8) | 0, (y+8) | 0);\n\t\t//context.rotate((timer.now-this.startTime)*0.1);\n\t\t_main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].scale(this.flipx ? -1 : 1, this.flipy ? -1 : 1);\n\t\t_main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].translate(-(x+8) | 0, -(y+8) | 0);\n\n\t\t_main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].drawImage(this.sheet.image.image, this.animSheetX,\n\t\t\tthis.animSheetY, this.sheet.width, this.sheet.height,\n\t\t\tx | 0, y | 0, this.sheet.width, this.sheet.height);\n\n\t\t_main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].restore();\n\t} else {\n\t\t_main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].drawImage(this.sheet.image.image, this.animSheetX,\n\t\t\tthis.animSheetY, this.sheet.width, this.sheet.height,\n\t\t\tx | 0, y | 0, this.sheet.width, this.sheet.height);\n\n\t}\n};\n\n/**\n * Developer Test\n */\n//var animSheet = new pge.AnimationSheet('media/images/mario.png', 16, 16);\n//var anim = new pge.Animation(animSheet, 1, [0, 1, 2]);\n//anim.draw(0,9);\n/**\n * Example: var run = new Animation( sheet, 0.07, [6,7,8,9,10,11]);\n * Means that the run animtation has 6 frames, uses sheet and each frame is shown 0.07 seconds\n */\n\n\n//# sourceURL=webpack:///./src/Animation.js?");

/***/ }),

/***/ "./src/AnimationSheet.js":
/*!*******************************!*\
  !*** ./src/AnimationSheet.js ***!
  \*******************************/
/*! exports provided: AnimationSheet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AnimationSheet\", function() { return AnimationSheet; });\n/* harmony import */ var _Image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Image */ \"./src/Image.js\");\n/* harmony import */ var _AssetCache__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AssetCache */ \"./src/AssetCache.js\");\n/**\n * Animation Sheet\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2015-01-01\n */\n\n\n\n\n\n\n\n function AnimationSheet(filename, width, height) {\n\tthis.image = new _Image__WEBPACK_IMPORTED_MODULE_0__[\"Image2\"](filename);\n \tthis.width = width;\n \tthis.height = height;\n};\n\n/**\n * Developer Test\n */\nnew AnimationSheet(__webpack_require__(/*! ./assets/images/mario.png */ \"./src/assets/images/mario.png\"), 16, 16);\n_AssetCache__WEBPACK_IMPORTED_MODULE_1__[\"AssetCache\"].getInstance().getAllKeys();\n\n/**\n * Example: new AnimationSheet(\"player.png\", 16, 16);\n * Means that each animation frame is 16x16\n */\n\n\n//# sourceURL=webpack:///./src/AnimationSheet.js?");

/***/ }),

/***/ "./src/AssetCache.js":
/*!***************************!*\
  !*** ./src/AssetCache.js ***!
  \***************************/
/*! exports provided: AssetCache */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AssetCache\", function() { return AssetCache; });\n/* harmony import */ var _HashMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./HashMap */ \"./src/HashMap.js\");\n/**\n * Asset Cache Singleton\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2014-12-31\n */\n\n\n\n\n\nfunction AssetCache() {\n\n\tif(AssetCache.instance != null) {\n\t\treturn AssetCache.instance;\n\t} else {\n\t\t_HashMap__WEBPACK_IMPORTED_MODULE_0__[\"HashMap\"].call(this);\n\t\tAssetCache.instance = this;\n\t}\n\n};\n\nAssetCache.instance = null;\n\nAssetCache.getInstance = function() {\n\treturn new AssetCache();\n};\n\nAssetCache.prototype = Object.create(_HashMap__WEBPACK_IMPORTED_MODULE_0__[\"HashMap\"].prototype);\n\n// change so the asset without name can be added and the name is used from the path property\nAssetCache.prototype.add = function(name, asset) {\n\tthis.put(name, asset);\n};\n\n/**\n * Developer Test\n */\n// out commented because image is loaded in index.html after asset cache\n// pge.AssetCache.getInstance().add('image01', new pge.Image(''));\n// pge.AssetCache.getInstance().add('image02', new pge.Image(''));\n// console.log('AssetCache.size(): ' + pge.AssetCache.getInstance().size());\n\n\n//# sourceURL=webpack:///./src/AssetCache.js?");

/***/ }),

/***/ "./src/Collection.js":
/*!***************************!*\
  !*** ./src/Collection.js ***!
  \***************************/
/*! exports provided: Collection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Collection\", function() { return Collection; });\n\n\n/**\n * Collection Class\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2014-12-16\n */\n\nfunction Collection() {\n\tthis.elements = [];\n}\n\nCollection.prototype.add = function(element) {\n\tthis.elements.push(element);\n};\n\nCollection.prototype.remove = function(element) {\n\tvar index = this.elements.indexOf(element);\n\tif(index != -1) {\n\t\tthis.elements.splice(index, 1);\n\t}\n};\n\nCollection.prototype.size = function() {\n\treturn this.elements.length;\n};\n\nCollection.prototype.get = function(index) {\n\treturn this.elements[index];\n};\n\n// http://stackoverflow.com/questions/9425009/remove-multiple-elements-from-array-in-javascript-jquery\n// removeValFromIndex.sort(function(a,b){ return b - a; });\n\n\n//# sourceURL=webpack:///./src/Collection.js?");

/***/ }),

/***/ "./src/Collision.js":
/*!**************************!*\
  !*** ./src/Collision.js ***!
  \**************************/
/*! exports provided: Circle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Circle\", function() { return Circle; });\n\n\n/**\n * 2D Collision Detection Library\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2014-12-15\n */\n\n// by default all entities trace against the collision map\n// as part of their update cycle\n\nfunction Circle(position, radius) {\n\tthis.center = position;\n\tthis.radius = radius;\n}\n\nCircle.prototype.intersects = function(circle) {\n\n\tvar dx = this.center.x - circle.center.x;\n\tvar dy = this.center.y - circle.center.y;\n\n\tvar dist = Math.sqrt((dx * dx) + (dy * dy));\n\treturn dist <= (this.radius + circle.radius);\n};\n\n// http://buildnewgames.com/broad-phase-collision-detection/\n// http://www.metanetsoftware.com/technique/tutorialB.html\n//http://gamedev.stackexchange.com/questions/44729/space-efficient-data-structures-for-broad-phase-collision-detection\n// http://codeincomplete.com/posts/2013/5/18/javascript_gauntlet_collision_detection/\n//http://buildnewgames.com/garbage-collector-friendly-code/\n/**\n * http://devmag.org.za/2009/04/13/basic-collision-detection-in-2d-part-1/\n * http://devmag.org.za/2009/04/17/basic-collision-detection-in-2d-part-2/\n * http://devmag.org.za/2009/08/25/basic-vector-recipes/\n * http://devmag.org.za/2009/08/12/vector-fundamentals/\n * http://melonjs.github.io/tutorial-platformer/#part8\n * http://games.greggman.com/game/programming_m_c__kids/\n * https://www.youtube.com/channel/UCn7FE3Tx391g1tWPv-1tv7Q\n * http://deepnight.net/a-simple-platformer-engine-part-2-collisions/\n *\n */\n\n\n\n//# sourceURL=webpack:///./src/Collision.js?");

/***/ }),

/***/ "./src/Font.js":
/*!*********************!*\
  !*** ./src/Font.js ***!
  \*********************/
/*! exports provided: Font */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Font\", function() { return Font; });\n/**\n * Font Class\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2014-12-30\n */\n\n\n\n/**\n * Font constructor\n */\nfunction Font(image) {\n\tthis.image = new Image();\n\tthis.image.src = __webpack_require__(/*! ./assets/fonts/biolabsfont.png */ \"./src/assets/fonts/biolabsfont.png\");\n};\n\n/**\n * Text alignment enum\n */\nFont.ALIGN = Object.freeze({\n\tLEFT: 0,\n\tRIGHT: 1,\n\tCENTER: 2\n});\n\n/**\n *\n */\nFont.prototype.draw = function(text, x, y, alignment) {\n\tfor(var i = 0; i < text.length; i++) {\n\t\tvar index = text.charCodeAt(i) - 32;\n\t\tcontext.drawImage(this.image, index*8, 0, 8, 8, x, y, 8, 8);\n\t}\n};\n\n\n\n//# sourceURL=webpack:///./src/Font.js?");

/***/ }),

/***/ "./src/HashMap.js":
/*!************************!*\
  !*** ./src/HashMap.js ***!
  \************************/
/*! exports provided: HashMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HashMap\", function() { return HashMap; });\n/**\n * HashMap\n *\n * Based on the Java HashMap class\n *\n * @see http://stackoverflow.com/questions/8877666/how-is-a-javascript-hash-map-implemented/8877719#8877719\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2014-12-30\n */\n\n\n\nfunction HashMap() {\n\tthis.map = {};\n};\n\n/**\n *\n * @param key\n * @param value\n */\nHashMap.prototype.put = function(key, value) {\n\tthis.map[key] = value;\n};\n\n/**\n *\n * @param key\n */\nHashMap.prototype.get = function(key) {\n\treturn this.map[key];\n};\n\n/**\n *\n * @param key\n */\nHashMap.prototype.remove = function(key) {\n\tdelete this.map[key];\n};\n\nHashMap.prototype.clear = function() {\n\tthis.map = {};\n};\n\nHashMap.prototype.containsKey = function(key) {\n\treturn this.map.hasOwnProperty(key);\n};\n\nHashMap.prototype.containsValue = function(value) {\n\n\tfor(var x in this.map) {\n\t\tif(this.map[x] == value) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n};\n\nHashMap.prototype.isEmpty = function() {\n\t//TODO: implement\n};\n\nHashMap.prototype.getAllKeys = function() {\n\tconsole.log(\"ALL KEYS!!!!\");\n\tfor(var x in this.map) {\n\t\tconsole.log(\"key: \"+x);\n\t}\n}\n\nHashMap.prototype.size = function() {\n\tvar count = 0;\n\n\tfor(var x in this.map) {\n\t\tcount++;\n\t}\n\n\treturn count;\n};\n\nvar map = new HashMap();\nmap.put(\"file01\", 1);\nmap.put(\"file02\", 1337);\nconsole.log(\"map size: \" + map.size());\nconsole.log(\"get(file02): \" + map.get('file02'));\nconsole.log(\"get(file01): \" + map.get('file01'));\n//map.remove('file02');\nconsole.log(\"map size: \" + map.size());\nconsole.log(\"contains file02 \" + map.containsKey('file01'));\nmap.getAllKeys();\n\n\n//# sourceURL=webpack:///./src/HashMap.js?");

/***/ }),

/***/ "./src/Image.js":
/*!**********************!*\
  !*** ./src/Image.js ***!
  \**********************/
/*! exports provided: Image2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Image2\", function() { return Image2; });\n/* harmony import */ var _AssetCache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AssetCache */ \"./src/AssetCache.js\");\n/**\n * pge.Image\n *\n * A thin wrapper for html5 images.\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2014-12-30\n */\n\n\n\n\n\n/**\n * This is the image constructor. It acts as a thin wrapper for an html5 image\n * object. In addition to being a thin wrapper the pge.Image also supports\n * caching using the AssetCache. The constructor first checks whether the Image\n * is in the cache and iff it is in the Asset Cache the cached version is returned.\n * In case the image is not available in the cache a new pge.Image is constructed and\n * added to the cache.\n *\n * @param path The path to an image file. The path is always relative to\n * \t\t\t   the .html file in which your game is running.\n * @returns A pge.Image instance\n */\nfunction Image2(path, usePreloader) {\n\n\t/*\n\t * When usePreloader is not activly set\n\t */\n\tthis.usePreloader = usePreloader || false;\n\n\tif(_AssetCache__WEBPACK_IMPORTED_MODULE_0__[\"AssetCache\"].getInstance().containsKey(path)) {\n\t//\tthis.isCached = true;\n\t\treturn _AssetCache__WEBPACK_IMPORTED_MODULE_0__[\"AssetCache\"].getInstance().get(path);\n\t} else {\n\n\t\tthis.path = path;\n\n\t\tthis.image = new Image();\n\t\t_AssetCache__WEBPACK_IMPORTED_MODULE_0__[\"AssetCache\"].getInstance().add(path, this);\n\t\tconsole.log(\"usePreloader \"+this.path + \" \" +this.usePreloader);\n\t\tif(this.usePreloader == false) {\n\t\t\t\t\tthis.isCached = true;\n\t\t\tconsole.log(\"false\");\n\t\t\tthis.image.onload = function() {\n\t\t\t\tconsole.log(\"loaded const \" +path);\n\t\t\t};\n\n\t\t\tthis.image.src = path;\n\t\t}\n\t}\n\n};\n\nImage2.prototype.load = function(callback) {\n\tvar path = this.path;\n\tconsole.log('TEST');\n\tthis.image.onload = function() {\n\t\tconsole.log('onload ' + path);\n\n\n\t\tcallback.loaded();\n\t};\n\n\n   console.log('set src ' + path);\n\tthis.image.src = this.path;\n}\n\nImage2.prototype.getImage = function() {\n\treturn this.image;\n};\n\nImage2.prototype.draw = function(x, y) {\n\t// TODO: implement\n};\n\nImage2.prototype.drawTile = function(x, y, index, tileSize) {\n\t// TODO: implement\n};\n\nconsole.log('AssetCache.getInstance().size(): ' + _AssetCache__WEBPACK_IMPORTED_MODULE_0__[\"AssetCache\"].getInstance().size());\n//new pge.Image('media/images/back.png');\n//new pge.Image('media/images/back2.png');\n//new pge.Image('media/images/back.png');\n_AssetCache__WEBPACK_IMPORTED_MODULE_0__[\"AssetCache\"].getInstance().getAllKeys();\n\n\n// WICHTIG: laden und cachen funktiert bereits\n// ABER: wie bekommt man es hin, dass der Loader\n// die assets laed und vorher nicht anfaengt!?\n// http://impactjs.com/documentation/working-with-assets\n// http://gamedev.stackexchange.com/questions/24102/resource-loader-for-an-html5-and-javascript-game\n// http://fragged.org/preloading-images-using-javascript-the-right-way-and-without-frameworks_744.html\n// http://www.mattlautz.us/impact-demos/initials-entry-screen/\n// http://www.mattlautz.us/impact-demos/map-scrolling-with-arrow-keys/\n// http://impactjs.com/documentation/entity-pooling\n// http://impactjs.com/documentation/animations\n// http://impactjs.com/documentation/collision\n// http://impactjs.com/documentation/working-with-assets\n// http://impactjs.com/documentation/weltmeister\n// http://www.adobe.com/devnet/dreamweaver/articles/developing-html5-games-with-impactjs.html\n\n\n//# sourceURL=webpack:///./src/Image.js?");

/***/ }),

/***/ "./src/Loader.js":
/*!***********************!*\
  !*** ./src/Loader.js ***!
  \***********************/
/*! exports provided: Loader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Loader\", function() { return Loader; });\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main */ \"./src/main.js\");\n/* harmony import */ var _Util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Util */ \"./src/Util.js\");\n/**\n * Preloader\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2014-12-30\n */\n\n\n\n\n\n\n\nfunction Loader() {\n\n\tif(Loader.instance != null) {\n\t\treturn Loader.instance;\n\t} else {\n\t\tthis.loadedResources = 0;\n\t\tthis.neededResources = 0;\n\t\tthis.done = false;\n\t\tthis.status = 0;\n\t\tLoader.instance = this;\n\t}\n\n};\n\nLoader.instance = null;\n\nLoader.getInstance = function() {\n\treturn new Loader();\n};\n\nLoader.prototype.addCallback = function(callback) {\n\tthis.callback = callback;\n};\n\nLoader.prototype.loaded = function() {\n\tthis.loadedResources++;\n\tthis.status = this.loadedResources / this.neededResources;\n\tthis.draw();\n\t//requestAnimationFrame(this.draw);\n\n\tconsole.log('loaded count ' + this.loadedResources);\n\tconsole.log('needed count ' + this.neededResources);\n\tif(this.loadedResources == this.neededResources) {\n\t\tthis.callback();\n\t}\n};\n\nfunction wait(ms){\n   var start = new Date().getTime();\n   var end = start;\n   while(end < start + ms) {\n     end = new Date().getTime();\n  }\n}\n\nLoader.prototype.preload = function() {\n\n\tfor(var i = 0; i < arguments.length; i++) {\n\t\tif(!arguments[i].isCached) {\n\t\t\tthis.neededResources++;\n\t\t}\n\t}\n\n\tthis.draw();\n\n\tvar that = this;\n\n\n\tfor(var i = 0; i < arguments.length; i++) {\n\t\tif(!arguments[i].isCached) {\n\n\t\t\t\tthat.loadResource.call(that, arguments[i]);\n\n\t\t}\n\t}\nconsole.log('loaded count ' + this.loadedResources);\n\tconsole.log('needed count ' + this.neededResources);\n\tif(this.neededResources == 0) {\n\t\tthis.callback();\n\t}\n};\n\nLoader.prototype.loadResource = function(res) {\n\n\n\t\t\t\tres.load(this);// this is the callback#\n\n\t\t\t\tconsole.log('loadRessource: ' +res.path);\n\n};\n\n/**\n * called during load to update the progress bar\n */\n\n // http://www.onextrapixel.com/2012/09/24/assets-loading-in-html5-game-development/\n // https://geeksretreat.wordpress.com/2012/08/13/a-progress-bar-using-html5s-canvas/\n // http://homepage.ntlworld.com/ray.hammond/progress/\nLoader.prototype.draw = function() {\n\t var percentage = (this.status * 100)|0;\n\t console.log('loader progress: '+percentage);\n\t _main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].fillStyle = 'black';\n\t _main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].fillRect(0, 0, _main__WEBPACK_IMPORTED_MODULE_0__[\"GameEngine\"].width, _main__WEBPACK_IMPORTED_MODULE_0__[\"GameEngine\"].height);\n\t _main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].fillStyle = 'white';\n\t _main__WEBPACK_IMPORTED_MODULE_0__[\"context\"].fillRect(0, _main__WEBPACK_IMPORTED_MODULE_0__[\"GameEngine\"].height/2-10, _main__WEBPACK_IMPORTED_MODULE_0__[\"GameEngine\"].width*this.status, 20);\n\t Object(_main__WEBPACK_IMPORTED_MODULE_0__[\"drawText\"])(100, 0, _Util__WEBPACK_IMPORTED_MODULE_1__[\"Util\"].prefixInteger(percentage, 3));\n\t Object(_main__WEBPACK_IMPORTED_MODULE_0__[\"drawText\"])(16, 26, 'PRELOADING GAME ASSETS.');\n\t _main__WEBPACK_IMPORTED_MODULE_0__[\"context2\"].drawImage(_main__WEBPACK_IMPORTED_MODULE_0__[\"canvas2\"],0,0,_main__WEBPACK_IMPORTED_MODULE_0__[\"GameEngine\"].width*_main__WEBPACK_IMPORTED_MODULE_0__[\"GameEngine\"].scale,_main__WEBPACK_IMPORTED_MODULE_0__[\"GameEngine\"].height*_main__WEBPACK_IMPORTED_MODULE_0__[\"GameEngine\"].scale);\n};\n\n\n//# sourceURL=webpack:///./src/Loader.js?");

/***/ }),

/***/ "./src/SoundManager.js":
/*!*****************************!*\
  !*** ./src/SoundManager.js ***!
  \*****************************/
/*! exports provided: SoundManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SoundManager\", function() { return SoundManager; });\n\n\n/**\n * Sound Manager Singleton\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2014-12-14\n */\n\nfunction SoundManager() {\n\n\t/**\n\t * Singleton Constructor\n\t *\n\t * @see https://code.google.com/p/jslibs/wiki/JavascriptTips#Singleton_pattern\n\t */\n\tif(SoundManager.instance) {\n\t\treturn SoundManager.instance;\n\t} else {\n\t\tSoundManager.instance = this;\n\t}\n\n}\n\nvar soundManager = new SoundManager();\n\nsoundManager.JUMP_SOUND \t= new Audio(__webpack_require__(/*! ./assets/sounds/17.-fortress.mp3 */ \"./src/assets/sounds/17.-fortress.mp3\"));\nsoundManager.JUMP_SOUND2\t= new Audio(__webpack_require__(/*! ./assets/sounds/smb_jump-small.wav */ \"./src/assets/sounds/smb_jump-small.wav\"));\nsoundManager.COIN \t\t\t= new Audio(__webpack_require__(/*! ./assets/sounds/smb3_coin.wav */ \"./src/assets/sounds/smb3_coin.wav\"));\nsoundManager.LEVEL_BEGIN \t= new Audio(__webpack_require__(/*! ./assets/sounds/smb3_enter_level.wav */ \"./src/assets/sounds/smb3_enter_level.wav\"));\nsoundManager.DIED \t\t\t= new Audio(__webpack_require__(/*! ./assets/sounds/smb3_player_down.wav */ \"./src/assets/sounds/smb3_player_down.wav\"));\nsoundManager.STOMP \t\t\t= new Audio(__webpack_require__(/*! ./assets/sounds/smb3_stomp.wav */ \"./src/assets/sounds/smb3_stomp.wav\"));\nsoundManager.ONE_UP \t\t= new Audio(__webpack_require__(/*! ./assets/sounds/smb3_1-up.wav */ \"./src/assets/sounds/smb3_1-up.wav\"));\nsoundManager.THWOMP \t\t= new Audio(__webpack_require__(/*! ./assets/sounds/smw_thud.wav */ \"./src/assets/sounds/smw_thud.wav\"));\nsoundManager.QUESTION \t\t= new Audio(__webpack_require__(/*! ./assets/sounds/smw_shell_ricochet.wav */ \"./src/assets/sounds/smw_shell_ricochet.wav\"));\n\n\n\n\n//# sourceURL=webpack:///./src/SoundManager.js?");

/***/ }),

/***/ "./src/Timer.js":
/*!**********************!*\
  !*** ./src/Timer.js ***!
  \**********************/
/*! exports provided: Timer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Timer\", function() { return Timer; });\n/**\n * Timer\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2014-12-30\n */\n\n\n\n\nfunction Timer() {\n\tthis.startTime = Date.now();\n\tthis.now = 0;\n};\n\nTimer.prototype.update = function() {\n\tthis.now = Date.now() - this.startTime;\n};\n\n\n//# sourceURL=webpack:///./src/Timer.js?");

/***/ }),

/***/ "./src/Util.js":
/*!*********************!*\
  !*** ./src/Util.js ***!
  \*********************/
/*! exports provided: Util */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Util\", function() { return Util; });\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main */ \"./src/main.js\");\n\n\n\n\n/**\n * Util Methods\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2014-12-14\n */\n\nfunction Util() {\n\n}\n\n/**\n * This method prefixes an integer with zeros\n */\nUtil.prefixInteger = function(number, length) {\n\treturn ('000000' + number).slice(-length);\n}\n\nUtil.cosineInterpolate = function(start, end, time) {\n\n\tif(time <start) return 0;\n\tif(time >end) return 1;\n\n\tvar mu = (time-start)/(end - start);\n\treturn (1-Math.cos(mu*Math.PI))/2;\n}\n\nUtil.fastCosineInterpolate = function(start, end, time) {\n\n\tif(time < start) {\n\t\treturn 0;\n\t}\n\n\tif(time > end) {\n\t\treturn 1;\n\t}\n\n\tvar mu = (time-start)/(end - start);\n\treturn (1 - _main__WEBPACK_IMPORTED_MODULE_0__[\"cosLookupTable\"][(mu * 511/2) | 0]) / 2;\n}\n\n//http://shichuan.github.io/javascript-patterns/\n\n\n//# sourceURL=webpack:///./src/Util.js?");

/***/ }),

/***/ "./src/Vector2d.js":
/*!*************************!*\
  !*** ./src/Vector2d.js ***!
  \*************************/
/*! exports provided: Vector2d */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector2d\", function() { return Vector2d; });\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main */ \"./src/main.js\");\n/**\n * Vector2d\n *\n * @author\tJohannes Diemke\n * @version\t1.0.0\n * @since\t2015-01-01\n */\n\n\n\n\n\nfunction Vector2d(x, y) {\n\tthis.x = x;\n\tthis.y = y;\n};\n\nVector2d.prototype.add = function(vector) {\n\tthis.x += vector.x;\n\tthis.y += vector.y;\n};\n\nVector2d.prototype.sub = function(vector) {\n\tthis.x -= vector.x;\n\tthis.y -= vector.y;\n};\n\nVector2d.prototype.getMagnitude = function() {\n\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n};\n\nVector2d.prototype.getAngle = function() {\n\treturn Math.atan2(this.y, this.x);\n};\n\nVector2d.prototype.fromAngle = function(angle, magnitude) {\n\tthis.x = magnitude * _main__WEBPACK_IMPORTED_MODULE_0__[\"cosLookupTable\"][angle];\n\tthis.y = magnitude * _main__WEBPACK_IMPORTED_MODULE_0__[\"sinLookupTable\"][angle];\n};\n\n\n//# sourceURL=webpack:///./src/Vector2d.js?");

/***/ }),

/***/ "./src/assets/fonts/biolabsfont.png":
/*!******************************************!*\
  !*** ./src/assets/fonts/biolabsfont.png ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"d4cb386b7856e859496e8c4295958a81.png\";\n\n//# sourceURL=webpack:///./src/assets/fonts/biolabsfont.png?");

/***/ }),

/***/ "./src/assets/images/back.png":
/*!************************************!*\
  !*** ./src/assets/images/back.png ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"3abf8cfbc79ec265070978cc9c04f2f9.png\";\n\n//# sourceURL=webpack:///./src/assets/images/back.png?");

/***/ }),

/***/ "./src/assets/images/back2.png":
/*!*************************************!*\
  !*** ./src/assets/images/back2.png ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"58b575e58318475f89c61a5868948f3c.png\";\n\n//# sourceURL=webpack:///./src/assets/images/back2.png?");

/***/ }),

/***/ "./src/assets/images/display.png":
/*!***************************************!*\
  !*** ./src/assets/images/display.png ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"c3846e26ac7a52e19504195217eb555a.png\";\n\n//# sourceURL=webpack:///./src/assets/images/display.png?");

/***/ }),

/***/ "./src/assets/images/fireball.png":
/*!****************************************!*\
  !*** ./src/assets/images/fireball.png ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"9197dbd59d1c89d970ced8c046a2bcfc.png\";\n\n//# sourceURL=webpack:///./src/assets/images/fireball.png?");

/***/ }),

/***/ "./src/assets/images/font2.png":
/*!*************************************!*\
  !*** ./src/assets/images/font2.png ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"fa32d7d78288fa773fbcd9e7a89f3a6f.png\";\n\n//# sourceURL=webpack:///./src/assets/images/font2.png?");

/***/ }),

/***/ "./src/assets/images/jumper.png":
/*!**************************************!*\
  !*** ./src/assets/images/jumper.png ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"9885a3975020017afb720a8c59499375.png\";\n\n//# sourceURL=webpack:///./src/assets/images/jumper.png?");

/***/ }),

/***/ "./src/assets/images/knall.png":
/*!*************************************!*\
  !*** ./src/assets/images/knall.png ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"b26fc5a8eb8c0bbe02ec467302d53448.png\";\n\n//# sourceURL=webpack:///./src/assets/images/knall.png?");

/***/ }),

/***/ "./src/assets/images/mario.png":
/*!*************************************!*\
  !*** ./src/assets/images/mario.png ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"6a9349d8d6817a8bd04fd18cdec85833.png\";\n\n//# sourceURL=webpack:///./src/assets/images/mario.png?");

/***/ }),

/***/ "./src/assets/images/mariotiles.png":
/*!******************************************!*\
  !*** ./src/assets/images/mariotiles.png ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"cb38b330ec7f469ac9ed6afdc273cf7a.png\";\n\n//# sourceURL=webpack:///./src/assets/images/mariotiles.png?");

/***/ }),

/***/ "./src/assets/images/sparkle.png":
/*!***************************************!*\
  !*** ./src/assets/images/sparkle.png ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"ac257378974b607c3c9f1419c8829f5d.png\";\n\n//# sourceURL=webpack:///./src/assets/images/sparkle.png?");

/***/ }),

/***/ "./src/assets/images/spit.png":
/*!************************************!*\
  !*** ./src/assets/images/spit.png ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"51f19ae4b450b9b297e6f36aa724b7d0.png\";\n\n//# sourceURL=webpack:///./src/assets/images/spit.png?");

/***/ }),

/***/ "./src/assets/sounds/17.-fortress.mp3":
/*!********************************************!*\
  !*** ./src/assets/sounds/17.-fortress.mp3 ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"fdb2fcb2136514ca3f47c92072f36aed.mp3\";\n\n//# sourceURL=webpack:///./src/assets/sounds/17.-fortress.mp3?");

/***/ }),

/***/ "./src/assets/sounds/smb3_1-up.wav":
/*!*****************************************!*\
  !*** ./src/assets/sounds/smb3_1-up.wav ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"ee9c2cc22861336fbffcdcf9c7a109ce.wav\";\n\n//# sourceURL=webpack:///./src/assets/sounds/smb3_1-up.wav?");

/***/ }),

/***/ "./src/assets/sounds/smb3_coin.wav":
/*!*****************************************!*\
  !*** ./src/assets/sounds/smb3_coin.wav ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"e8613517813b0c304f51df0f766a2ef3.wav\";\n\n//# sourceURL=webpack:///./src/assets/sounds/smb3_coin.wav?");

/***/ }),

/***/ "./src/assets/sounds/smb3_enter_level.wav":
/*!************************************************!*\
  !*** ./src/assets/sounds/smb3_enter_level.wav ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"c27ee3d9d9c9bc035798faa15e19998a.wav\";\n\n//# sourceURL=webpack:///./src/assets/sounds/smb3_enter_level.wav?");

/***/ }),

/***/ "./src/assets/sounds/smb3_player_down.wav":
/*!************************************************!*\
  !*** ./src/assets/sounds/smb3_player_down.wav ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"b5a01d6fb19dabd370af2c7eb02f5df9.wav\";\n\n//# sourceURL=webpack:///./src/assets/sounds/smb3_player_down.wav?");

/***/ }),

/***/ "./src/assets/sounds/smb3_stomp.wav":
/*!******************************************!*\
  !*** ./src/assets/sounds/smb3_stomp.wav ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"3728e8eec8bd19cba3b496336ba3ad3f.wav\";\n\n//# sourceURL=webpack:///./src/assets/sounds/smb3_stomp.wav?");

/***/ }),

/***/ "./src/assets/sounds/smb_jump-small.wav":
/*!**********************************************!*\
  !*** ./src/assets/sounds/smb_jump-small.wav ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"b377dcd4ed1e233d09d675c952bbc776.wav\";\n\n//# sourceURL=webpack:///./src/assets/sounds/smb_jump-small.wav?");

/***/ }),

/***/ "./src/assets/sounds/smw_shell_ricochet.wav":
/*!**************************************************!*\
  !*** ./src/assets/sounds/smw_shell_ricochet.wav ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"a52e180519c80b38a04f12b75cbb8ad8.wav\";\n\n//# sourceURL=webpack:///./src/assets/sounds/smw_shell_ricochet.wav?");

/***/ }),

/***/ "./src/assets/sounds/smw_thud.wav":
/*!****************************************!*\
  !*** ./src/assets/sounds/smw_thud.wav ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"4770800c291b61c2d7e4b182695af624.wav\";\n\n//# sourceURL=webpack:///./src/assets/sounds/smw_thud.wav?");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/*! exports provided: context, context2, canvas2, timer, sinLookupTable, cosLookupTable, GameEngine, drawText */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"context\", function() { return context; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"context2\", function() { return context2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"canvas2\", function() { return canvas2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"timer\", function() { return timer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sinLookupTable\", function() { return sinLookupTable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cosLookupTable\", function() { return cosLookupTable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameEngine\", function() { return GameEngine; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"drawText\", function() { return drawText; });\n/* harmony import */ var _Font__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Font */ \"./src/Font.js\");\n/* harmony import */ var _Timer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Timer */ \"./src/Timer.js\");\n/* harmony import */ var _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AnimationSheet */ \"./src/AnimationSheet.js\");\n/* harmony import */ var _AssetCache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AssetCache */ \"./src/AssetCache.js\");\n/* harmony import */ var _Vector2d__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Vector2d */ \"./src/Vector2d.js\");\n/* harmony import */ var _Collision__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Collision */ \"./src/Collision.js\");\n/* harmony import */ var _Animation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Animation */ \"./src/Animation.js\");\n/* harmony import */ var _Collection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Collection */ \"./src/Collection.js\");\n/* harmony import */ var _Loader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Loader */ \"./src/Loader.js\");\n/* harmony import */ var _SoundManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./SoundManager */ \"./src/SoundManager.js\");\n/* harmony import */ var _Image__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Image */ \"./src/Image.js\");\n/* harmony import */ var _Util__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Util */ \"./src/Util.js\");\n/**\n * Main Game\n */\n//http://codeflow.org/entries/2013/feb/15/soft-shadow-mapping/\n\n//use web audio api???\n\n//************\n// https://hacks.mozilla.org/2013/05/optimizing-your-javascript-game-for-firefox-os/\n// https://mudcu.be/journal/2011/11/bitwise-gems-and-other-optimizations/\n// http://updates.html5rocks.com/2012/08/When-milliseconds-are-not-enough-performance-now\n// http://www.html5rocks.com/en/tutorials/canvas/performance/\n//************************\n\n// >>>>>>>>>>>> do not use real time but game time for animation! not date.now()\n\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// READ THIS:\n// http://codeincomplete.com/posts/2013/12/3/javascript_game_foundations_loading_assets/\n\n\n\n\n\n\n\n\n\n\n\n\n\n\"use strict\";\n\nvar image;\nvar tiles;\nvar font;\nvar mario;\nvar back, back2, display;\nvar context;\nvar context2;\nvar canvas;\nvar canvas2;\nvar touchPoints = [];\nvar myFont = new _Font__WEBPACK_IMPORTED_MODULE_0__[\"Font\"](\"\");\nvar timer = new _Timer__WEBPACK_IMPORTED_MODULE_1__[\"Timer\"]();\n\n/**\n * Trigonometry lookup tables\n * 6 times faster than sin/cos\n */\nvar sinLookupTable = [];\nvar cosLookupTable = [];\n\nvar hitTime = 0;\n\nfor(var i=0; i < 512; i++) {\n\tsinLookupTable[i] = Math.sin(Math.PI * 2.0 * i / 512);\n\tcosLookupTable[i] = Math.cos(Math.PI * 2.0 * i / 512);\n}\n\n/**\n * Enums\n */\n\nvar TileType = Object.freeze({\n\tWALKABLE\t: 0,\n\tSOLID\t\t: 1,\n\tCLOUD\t\t: 2,\n\tSLOPE\t\t: 3,\n\tSPIKES\t\t: 4,\n\tLAVA\t\t: 5,\n\tWATER\t\t: 6,\n\tLADDER \t\t: 7\n});\n\nvar GameEngine = {\n\tfps: 30,\n\twidth: 256,\n\theight: 224,\n\tscale: 2.0\n};\n\n/**\n * TODO: put it in its own file and refactor!!!\n */\nfunction Tile(walkable, animation, ttype) {\n\n\tthis.walkable = walkable;\n\tthis.animation = animation;\n\tthis.tileType = ttype;\n\n\tthis.update = function() {\n\t\tif(this.tileType != TileType.WALKABLE)\n\t\t\tthis.animation.update();\n\t};\n\n\tthis.draw = function(x, y) {\n\t\tif(this.tileType != TileType.WALKABLE)\n\t\t\tthis.animation.draw(x, y);\n\t};\n\n}\n\nvar tileAnimSheet = new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16);\n\nvar LavaTile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.007, [5,6,7,8]) , TileType.LAVA);\nvar CastleStone\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [0]), TileType.SOLID);\nvar CloudTile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [32]), TileType.CLOUD);\nvar EmptyTile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [10]), TileType.WALKABLE);\nvar QuestionTile\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.006, [11,12,13,14]), TileType.SOLID);\nvar SpikeTile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [4]), TileType.LAVA);\nvar BallTile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [42]), TileType.SOLID);\nvar FlowerTile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [46]), TileType.LADDER);\nvar Ladder1Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [47]), TileType.LADDER);\nvar Ladder2Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [48]), TileType.LADDER);\nvar Ladder3Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [49]), TileType.LADDER);\nvar Ladder4Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [50]), TileType.LADDER);\nvar Ladder5Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [51]), TileType.LADDER);\nvar Ladder6Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [52]), TileType.LADDER);\nvar Ladder7Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [53]), TileType.LADDER);\nvar Ladder8Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [54]), TileType.LADDER);\nvar Ladder9Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [55]), TileType.LADDER);\n\nvar castleBk1Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [59]), TileType.SOLID);\nvar castleBk2Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [60]), TileType.SOLID);\nvar castleBk3Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [61]), TileType.SOLID);\nvar castleBk4Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [62]), TileType.SOLID);\nvar castleBk5Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [63]), TileType.SOLID);\nvar castleBk6Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [64]), TileType.SOLID);\nvar castleBk7Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [65]), TileType.SOLID);\nvar castleBk8Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [66]), TileType.SOLID);\nvar castleBk9Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [67]), TileType.SOLID);\nvar castleBk10Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [68]), TileType.SOLID);\nvar castleBk11Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [69]), TileType.SOLID);\nvar castleBk12Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [70]), TileType.SOLID);\nvar castleBk13Tile\t\t= new Tile(true, new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](tileAnimSheet, 0.01, [71]), TileType.SOLID);\n\n\nvar TileSet = [];\nTileSet[ 0] = CastleStone;\nTileSet[ 1] = LavaTile;\nTileSet[ 2] = QuestionTile;\nTileSet[ 3] = SpikeTile;\nTileSet[ 4] = BallTile;\nTileSet[ 5] = FlowerTile;\nTileSet[ 6] = Ladder1Tile;\nTileSet[ 7] = Ladder2Tile;\nTileSet[ 8] = Ladder3Tile;\nTileSet[ 9] = Ladder4Tile;\nTileSet[ 10] = Ladder5Tile;\nTileSet[ 11] = Ladder6Tile;\nTileSet[ 12] = Ladder7Tile;\nTileSet[ 13] = Ladder8Tile;\nTileSet[ 14] = Ladder9Tile;\nTileSet[33] = EmptyTile;\nTileSet[32] = CloudTile;\nTileSet[34] = castleBk1Tile;\nTileSet[35] = castleBk2Tile;\nTileSet[36] = castleBk3Tile;\nTileSet[37] = castleBk4Tile;\nTileSet[38] = castleBk5Tile;\nTileSet[39] = castleBk6Tile;\nTileSet[40] = castleBk7Tile;\nTileSet[41] = castleBk8Tile;\nTileSet[42] = castleBk9Tile;\nTileSet[43] = castleBk10Tile;\nTileSet[44] = castleBk11Tile;\nTileSet[45] = castleBk12Tile;\nTileSet[46] = castleBk13Tile;\n\nfunction Coin(x, y) {\n\n\tthis.x= x;\n\tthis.y= y;\n\tthis.width= 16;\n\tthis.height= 16;\n\n\tthis.visible = true;\n\tthis.collected = false;\n\n\tthis.anims = {\n\t\tanimRotate: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.007, [16, 17, 18, 19]),\n\t\tsparkle1: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/sparkle.png */ \"./src/assets/images/sparkle.png\"), 8, 8), 0.01, [8,0,1,2,3,4,5,6,7,8], true),\n\t\tsparkle2: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/sparkle.png */ \"./src/assets/images/sparkle.png\"), 8, 8), 0.01, [8,0,1,2,3,4,5,6,7,8], true),\n\t\tsparkle3: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/sparkle.png */ \"./src/assets/images/sparkle.png\"), 8, 8), 0.01, [8,0,1,2,3,4,5,6,7,8], true),\n\t\tsparkle4: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/sparkle.png */ \"./src/assets/images/sparkle.png\"), 8, 8), 0.01, [8,0,1,2,3,4,5,6,7,8], true)\n\t};\n\n\tthis.currentAnim = this.anims.animRotate;\n\n\tthis.collect = function() {\n\t\tthis.collected= true;\n\t\tthis.collectTime = timer.now;\n\n\t\tthis.anims.sparkle1.setStartTime(this.collectTime +50);\n\t\tthis.anims.sparkle2.setStartTime(this.collectTime +180);\n\t\tthis.anims.sparkle3.setStartTime(this.collectTime +260);\n\t\tthis.anims.sparkle4.setStartTime(this.collectTime +300);\n\t}\n\n\n\t// TODO: remove update from draw method!\n\tthis.draw= function() {\n\t\tif(!this.collected) {\n\t\t\t//drawTile2(this.animationFrames[pos], this.x,this.y);\n\t\t\tthis.currentAnim.update();\n\t\t\tthis.currentAnim.draw(this.x, this.y);\n\t\t}\n\n\t\t// length = length of anim(900 = 100*frames) + last start of anim (300)\n\t\tif(this.collected && timer.now < this.collectTime+900+300) {\n\n\t\t\tthis.anims.sparkle1.update();\n\t\t\tthis.anims.sparkle1.draw(this.x-4, this.y);\n\n\t\t\tthis.anims.sparkle2.update();\n\t\t\tthis.anims.sparkle2.draw(this.x+8, this.y-4);\n\n\t\t\tthis.anims.sparkle3.update();\n\t\t\tthis.anims.sparkle3.draw(this.x+4, this.y+6);\n\n\t\t\tthis.anims.sparkle4.update();\n\t\t\tthis.anims.sparkle4.draw(this.x+12, this.y+12);\n\t\t}\n\t};\n\n}\n\nfunction Mushroom(xpos, ypos) {\n\tthis.size = {width: 16, height: 16};\n\tthis.velocity = {x: 0,y: 0.0};\n\tthis.offset = {x: 0, y: 1};\n\tthis.position = {x: xpos, y: ypos};\n\tthis.isJumping = false;\n\tthis.collisionCircle = new _Collision__WEBPACK_IMPORTED_MODULE_5__[\"Circle\"](this.position, 8.0);\n\n\t/**\n\t * A factor, indicating with which force the entity will bounce back after a\n\t * collision. With a .bounciness set to 1, the entity will bounce back with\n\t * the same speed it has hit the other entity/collision map. Default 0.\n\t */\n\tthis.bounciness = 0.0;\n\tthis.jumpspeed = 3;\n\tthis.gravity = 0.0;\n\tthis.animSheet = new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/jumper.png */ \"./src/assets/images/jumper.png\"), 16, 24);\n\tthis.anims = {};\n\tthis.dead = false;\n\tthis.deathTime =0;\n\n\n\tthis.active = true;\n\tthis.anims = {\n\t\tanimMushroom: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.007, [33]),\n\t};\n\n\tthis.currentAnim = this.anims.animMushroom;\n\n\tthis.draw= function() {\n\t\tthis.currentAnim.draw(this.position.x, this.position.y+1);\n\t};\n\n\n\tthis.update = function() {\n\t\tdoPhysics(this, this.velocity);\n\t};\n\n\tthis.onHit = function() {\n\t\tthis.velocity.x*=-1;\n\t\t//this.stateMachine.currentState.onHit.call(this);\n\t};\n\n\tthis.onFalling = function() {\n\t\t//this.stateMachine.currentState.onFall.call(this);\n\t};\n\n\tthis.onFloor = function() {\n\t\t//this.stateMachine.currentState.onFloor.call(this);\n\t};\n\n\t/**\n\t * TODO: The circle center should be the center of the sprite\n\t * and NOT the upper left corner of the sprite!\n\t */\n\tthis.intersects = function(player) {\n\t\treturn this.collisionCircle.intersects(player.collisionCircle);\n\t};\n\n}\n\nfunction LaserBall(x, y) {\n\tthis.xpos = x;\n\tthis.ypos = y;\n\tthis.width = 16;\n\tthis.height = 16;\n\tthis.speed = 1;\n\tthis.jumpspeed =3;\n\tthis.active = true;\n\tthis.right = false;\n\tthis.startTime = timer.now;\n\tthis.vector = new _Vector2d__WEBPACK_IMPORTED_MODULE_4__[\"Vector2d\"](0,0);\n\n\tthis.anims = {\n\t\tanimBall: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.02, [34, 35, 36, 37, 38, 39, 40, 41]),\n\t};\n\n\tthis.currentAnim = this.anims.animBall;\n\n\tthis.draw= function() {\n\n\t\tvar time = timer.now - this.startTime;\n\n\t\tthis.currentAnim.update();\n\t\t//this.vector.fromAngle(time*0.0008, 16 * 1);\n\t\t//this.currentAnim.draw(this.xpos+this.vector.x, this.ypos+this.vector.y);\n\t\t//this.vector.fromAngle(time*0.0008, 16 * 2);\n\t\t//this.currentAnim.draw(this.xpos+this.vector.x, this.ypos+this.vector.y);\n\t\tvar angle = (time>>5)&0x1ff;\n\t\tvar angle2 = (angle+255)&0x1ff;\n\t\tthis.vector.fromAngle(angle, 16 * 3);\n\t\tthis.currentAnim.draw(this.xpos+this.vector.x, this.ypos+this.vector.y);\n\t\tthis.vector.fromAngle(angle2, 16 * 3);\n\t\tthis.currentAnim.draw(this.xpos+this.vector.x, this.ypos+this.vector.y);\n\t};\n\n\t/*this.intersects = function(player) {\n\t\treturn new Circle(this.xpos,this.ypos, 8).intersects(new Circle(player.xpos, player.ypos, 8));\n\t};\n\t*/\n}\n\nvar laserBall = new LaserBall(16*19,16*7);\nvar mush = new Mushroom(16*52,16*8+-1);\n\nfunction Flame(x, y) {\n\n\tthis.x= x;\n\tthis.y= y;\n\tthis.posx =x;\n\tthis.posy=y;\n\tthis.width= 16;\n\tthis.height= 16;\n\tthis.timeOffset = Math.random()*1000;\n\n\tthis.visible = true;\n\n\tthis.anims = {\n\t\tanimUp: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.02, [20,21,22]),\n\t\tanimDown: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.02, [23,24,25]),\n\t\tspit: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/spit.png */ \"./src/assets/images/spit.png\"), 16, 16), 0.01, [0,1,2,3,4,5,6], true)\n\t};\n\n\tthis.currentAnim = this.anims.animUp;\n\n\tthis.collides = function(player) {\n\t\tvar center1x = this.posx + this.width/2;\n\t\tvar center1y = this.posy + this.height/2;\n\t\tvar center2x = player.position.x + player.width/2;\n\t\tvar center2y = player.position.y + player.height/2;\n\t\tvar distx = center1x - center2x;\n\t\tvar disty = center1y - center2y;\n\n\t\treturn Math.sqrt((distx*distx)+(disty*disty)) <= this.width/2 + player.width/2;\n\t};\n\n\tthis.update = function() {\n\t\t// use a state machine to define flame as entity\n\t};\n\n\tthis.draw= function() {\n\t\t\tif(this.visible) {\n\t\t\t\tthis.currentAnim.update();\n\t\t\t\tvar sin = ((timer.now+this.timeOffset)>>3)&0x1ff;\n\t\t\t\tif(cosLookupTable[sin]<0) {\n\t\t\t\t\tthis.posy =this.y +Math.floor(sinLookupTable[sin]*16*7);\n\t\t\t\t\tthis.currentAnim = this.anims.animUp;\n\t\t\t\t} else {\n\t\t\t\t\tthis.posy = this.y+Math.floor(sinLookupTable[sin]*16*7)\n\t\t\t\t\tthis.currentAnim = this.anims.animDown;\n\t\t\t\t}\n\n\t\t\t\tvar temp = sinLookupTable[sin];\n\t\t\t\tif(temp <0 && temp > -0.1)\n\t\t\t\t\tthis.anims.spit.rewind();\n\n\t\t\t\tthis.currentAnim.draw(this.posx, this.posy);\n\t\t\t\tthis.anims.spit.update();\n\t\t\t\tthis.anims.spit.flipx = false;\n\t\t\t\tthis.anims.spit.draw(this.x-16, this.y-16+4);\n\t\t\t\tthis.anims.spit.flipx = true;\n\t\t\t\tthis.anims.spit.draw(this.x+16, this.y-16+4);\n\t\t\t}\n\t};\n}\n\nfunction doPhysics(entity, velocity) {\n\n\t//var tempVel = {x: 0, y: 0};\n\n\n\tif(entity.velocity.x > 0) {\n\t\tif(!hit(entity.position.x + (entity.size.width - 1) + velocity.x, entity.position.y) &&\n\t\t   !hit(entity.position.x + (entity.size.width - 1) + velocity.x, entity.position.y + (entity.size.height - 1))) {\n\t\t\tentity.position.x += velocity.x;\n\t\t} else {\n\t\t\tvar pos = entity.position.x += velocity.x;\n\t\t\tentity.position.x = (Math.floor((entity.position.x+(entity.size.width-1)+velocity.x)/16))*16-entity.size.width;\n\t\t\tif(entity.bounciness > 0) {\n\t\t\t\t//tempVel.x = (entity.position.x-pos) * entity.bounciness;\n\t\t\t}\n\t\t\tentity.onHit();\n\t\t}\n\t} else {\n\n\t\tif(!hit(entity.position.x+velocity.x, entity.position.y) &&\n\t\t   !hit(entity.position.x+velocity.x, entity.position.y+(entity.size.height-1)) ) {\n\t\t\tentity.position.x+=velocity.x;\n\n\t\t} else { // hit!\n\t\t\tif(entity.bounciness > 0) {\n\t\t\t\tvar pos = entity.position.x+velocity.x;\n\t\t\t\tentity.position.x =  (((entity.position.x/16) | 0) * 16);\n\t\t\t\t//tempVel.x = (entity.position.x-pos) * entity.bounciness;\n\t\t\t} else {\n\t\t\t\tentity.position.x = ((entity.position.x/16) | 0) * 16;\n\t\t\t}\n\n\t\t\tentity.onHit();\n\t\t}\n\t}\n\n\t// recursive call to resolve bounciness\n\t// problematic because gravity for falling is computed again!!!!\n\n\t//if(tempVel.x > 0 || tempVel.y > 0) {\n\t//\tdoPhysics(entity, tempVel);\n\t//}\n\n\t\t\t\t// same check as the falling down check!!!!\n\tvar isOnCloud = (onCloud(entity.position.x, entity.position.y+(entity.size.height-1)+1) &&\n\t\t\t         !onCloud(entity.position.x, entity.position.y+(entity.size.height-1)) ||\n\t\t\t\t     onCloud(entity.position.x+(entity.size.width-1), entity.position.y+(entity.size.height-1)+1) &&\n\t\t\t         !onCloud(entity.position.x+(entity.size.width-1), entity.position.y+(entity.size.height-1)));\n\n\t//falling\n\tif(!hit(entity.position.x, entity.position.y+(entity.size.height-1)+1) &&\n\t   !hit(entity.position.x + (entity.size.width-1), entity.position.y+(entity.size.height-1)+1) &&\n\t   !entity.isJumping &&\n\t   !isOnCloud) {\n\t\tentity.jumpspeed = 0;\n\t\tentity.isJumping = true;\n\t\tentity.onFalling();\n\t}\n\n\tif(entity.isJumping) {\n\n\t\tentity.jumpspeed = entity.jumpspeed + entity.gravity;\n\t\tif(entity.jumpspeed > 8) entity.jumpspeed = 8;\n\n\t\tif(entity.jumpspeed < 0) { //jumping up\n\n\t\t\tif(!hit(entity.position.x, entity.position.y+entity.jumpspeed) &&\n\t\t\t   !hit(entity.position.x+(entity.size.width-1), entity.position.y+entity.jumpspeed)) {\n\t\t\t\tentity.position.y+=entity.jumpspeed;\n\t\t\t} else {\n\t\t\t\tentity.position.y = Math.floor(entity.position.y/16)*16;\n\t\t\t\tentity.isJumping =true;\n\t\t\t\tentity.jumpspeed=0;\n\t\t\t\tentity.onHit();\n\t\t\t}\n\n\t\t} else { //falling\n\t\t\t// kinda tricky: test wether on cloud by checking wether the old y pos was not on cloud\n\t\t\t// we know two things at this poing: we are falling down AND if the previous pos\n\t\t\t// of the bottom sprite was not on cloud we crossed the cloud from top!!! because\n\t\t\t// we can jump max 16 pixel at once!\n\t\t\tvar isOnCloud = (onCloud(entity.position.x, entity.position.y+(player.height-1)+entity.jumpspeed) &&\n\t\t\t            !onCloud(entity.position.x, entity.position.y+(entity.size.height-1)) ||\n\t\t\t\t     onCloud(entity.position.x+(entity.size.width-1), entity.position.y+(entity.size.height-1)+entity.jumpspeed) &&\n\t\t\t            !onCloud(entity.position.x+(entity.size.width-1), entity.position.y+(entity.size.height-1)));\n\n\n\t\t\tif(!hit(entity.position.x, entity.position.y+(entity.size.height-1)+entity.jumpspeed) &&\n\t\t\t   !hit(entity.position.x+(entity.size.width-1), entity.position.y+(entity.size.height-1)+entity.jumpspeed) &&\n\t\t\t   !isOnCloud\n\t\t\t   ) {\n\t\t\t\tentity.position.y+=entity.jumpspeed;\n\n\t\t\t} else {\n\t\t\t\tentity.position.y = Math.floor((entity.position.y+(entity.size.height-1)+entity.jumpspeed)/16)*16 -entity.size.height;\n\t\t\t\tentity.isJumping =false;\n\t\t\t\tentity.onFloor();\n\t\t\t}\n\n\t\t}\n\t}\n\n}\n\n// A Ball Mario shoots to kill enemies\nfunction Fireball(xpos, ypos) {\n\tthis.position = {x: xpos, y: ypos};\n\tthis.size = {width: 8, height:8};\n\tthis.animSheet = new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/fireball.png */ \"./src/assets/images/fireball.png\"), 9, 9);\n\tthis.anims = {};\n\nthis.bounciness = 0.0;\n\tthis.jumpspeed = 3;\n\tthis.gravity = 0.5;\n\tthis.velocity = {x: 1.99,y: 0.0};\n\tthis.isJumping = false;\n\tthis.addAnim = function(name, time, sequence) {\n\t\tthis.anims[name] = new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](this.animSheet, time, sequence);\n\t};\n\n\tthis.init = function() {\n\t\tthis.addAnim('anim', 0.008, [0, 1, 2, 3]);\n\t\tthis.currentAnim = this.anims.anim.rewind();\n\t};\n\n\tthis.init();\n\tthis.inactive = false;\n\nthis.stateMachine = {\n\t\tstates: {\n\t\t\tWALK: {\n\t\t\t\tonHit: function() {\n\t\t\t\t\tthis.velocity.x *= -1;\n\t\t\t\t\t// no state transition, reflexiv transition\n\t\t\t\t},\n\t\t\t\tonFall: function() {\n\t\t\t\t\t//this.currentAnim = this.anims.animStanding;\n\t\t\t\t\t//this.velocity.x = 0;\n\t\t\t\t\tthis.stateMachine.currentState = this.stateMachine.states.FALLING;\n\t\t\t\t},\n\t\t\t\tonFloor: function() {\n\n\t\t\t\t},\n\t\t\t\tonTimeOut: function() {\n\t\t\t\t\t// check timeout condition and do transition if needed!\n\t\t\t\t}\n\t\t\t},\n\t\t\tFALLING: {\n\t\t\t\tonHit: function() {\n\t\t\t\t\tthis.velocity.x *= -1;\n\t\t\t\t\tthis.inactive = true;\n\t\t\t\t\t//this.currentAnim.flipx = true;\n\t\t\t\t},\n\t\t\t\tonFall: function() {\n\n\t\t\t\t},\n\t\t\t\tonFloor: function() {\n\n\t\t\t\t\t//this.velocity = {x: 0.29,y: 0.0};\n\t\t\t\t\t\tthis.jumpspeed = -6;\n\t\t\t\t\tthis.isJumping = true;\n\t\t\t\t\t//this.currentAnim = this.anims.animRun;\n\t\t\t\t\t//this.stateMachine.currentState = this.stateMachine.states.FALLING;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcurrentState: null\n\t};\n\n\tthis.stateMachine.currentState = this.stateMachine.states.FALLING;\n\n\tthis.onHit = function() {\n\t\tthis.stateMachine.currentState.onHit.call(this);\n\t};\n\n\tthis.onFalling = function() {\n\t\tthis.stateMachine.currentState.onFall.call(this);\n\t};\n\n\tthis.onFloor = function() {\n\t\tthis.stateMachine.currentState.onFloor.call(this);\n\t};\n\n\tthis.update = function() {\n\n\t\tif(!this.dead) {\n\t\t\tdoPhysics(this, this.velocity);\n\t\t}\n\n\n\t};\n\n\tthis.draw = function() {\n\n\t\t\tthis.currentAnim.update();\n\t\t\tthis.currentAnim.draw(this.position.x, this.position.y);\n\n\t};\n}\n\n\nfunction Jumper(xpos, ypos) {\n\n\tthis.size = {width: 16, height: 24};\n\tthis.velocity = {x: -2.29,y: 0.0};\n\tthis.offset = {x: 0, y: 1};\n\tthis.position = {x: xpos, y: ypos};\n\tthis.isJumping = false;\n\tthis.collisionCircle = new _Collision__WEBPACK_IMPORTED_MODULE_5__[\"Circle\"](this.position, 8.0);\n\n\t/**\n\t * A factor, indicating with which force the entity will bounce back after a\n\t * collision. With a .bounciness set to 1, the entity will bounce back with\n\t * the same speed it has hit the other entity/collision map. Default 0.\n\t */\n\tthis.bounciness = 0.0;\n\tthis.jumpspeed = 3;\n\tthis.gravity = 0.4;\n\tthis.animSheet = new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/jumper.png */ \"./src/assets/images/jumper.png\"), 16, 24);\n\tthis.anims = {};\n\tthis.dead = false;\n\tthis.deathTime =0;\n\n\t/**\n\t * TODO: implement state charts like proposed by harel, i.e.\n\t * timers that fire transitions after a given time in a state!\n\t */\n\tthis.stateMachine = {\n\t\tstates: {\n\t\t\tWALK: {\n\t\t\t\tonHit: function() {\n\t\t\t\t\tthis.velocity.x *= -1;\n\t\t\t\t\t// no state transition, reflexiv transition\n\t\t\t\t},\n\t\t\t\tonFall: function() {\n\t\t\t\t\t//this.currentAnim = this.anims.animStanding;\n\t\t\t\t\t//this.velocity.x = 0;\n\t\t\t\t\tthis.stateMachine.currentState = this.stateMachine.states.FALLING;\n\t\t\t\t},\n\t\t\t\tonFloor: function() {\n\n\t\t\t\t},\n\t\t\t\tonTimeOut: function() {\n\t\t\t\t\t// check timeout condition and do transition if needed!\n\t\t\t\t}\n\t\t\t},\n\t\t\tFALLING: {\n\t\t\t\tonHit: function() {\n\t\t\t\t\tthis.velocity.x *= -1;\n\t\t\t\t},\n\t\t\t\tonFall: function() {\n\n\t\t\t\t},\n\t\t\t\tonFloor: function() {\n\n\t\t\t\t\t//this.velocity = {x: 0.29,y: 0.0};\n\t\t\t\t\t\tthis.jumpspeed = -6;\n\t\t\t\t\tthis.isJumping = true;\n\t\t\t\t\t//this.currentAnim = this.anims.animRun;\n\t\t\t\t\t//this.stateMachine.currentState = this.stateMachine.states.FALLING;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcurrentState: null\n\t};\n\n\tthis.stateMachine.currentState = this.stateMachine.states.FALLING;\n\n\tthis.addAnim = function(name, time, sequence) {\n\t\tthis.anims[name] = new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](this.animSheet, time, sequence);\n\t};\n\n\tthis.init = function() {\n\t\tthis.addAnim('animRun', 0.003, [0, 1]);\n\t\tthis.currentAnim = this.anims.animRun.rewind();\n\t};\n\n\tthis.init();\n\n\tthis.collides = function(player) {\n\n\t\tif(this.dead) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.collisionCircle.intersects(player.collisionCircle)) {\n\n\t\t\tif(!player.dead && player.position.y < this.collisionCircle.center.y) {\n\t\t\t\tthis.dead = true;\n\t\t\t\tplayer.position.y = this.position.y - player.height;\n\t\t\t\tplayer.isJumping = true;\n\t\t\t\tplayer.jumpspeed = -9;\n\t\t\t\tplayer.animation='jumping.right';\n\t\t\t\t//http://stackoverflow.com/questions/14926306/javascript-play-sound-on-hover-stop-and-reset-on-hoveroff\n\t\t\t\t//https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_HTML5_audio_and_video\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.pause();\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.currentTime = 0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.volume = 1.0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.play();\n\t\t\t\tthis.deathTime = timer.now;\n\t\t\t\t//this.currentAnim = this.anims.animDead.rewind();\n\t\t\t\tplayer.points += 50;\n\t\t\t} else if(!player.dead){\n\t\t\t\tplayer.dead=true;\n\n\t\t\t\tplayer.animation='dieing';\n\t\t\t\tplayer.deathTime = timer.now;\n\n\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND.pause();\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.pause();\n\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.currentTime = 0.0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.play();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @see http://www.bennadel.com/blog/2265-changing-the-execution-context-of-javascript-functions-using-call-and-apply.htm\n\t * for description of call method\n\t */\n\tthis.onHit = function() {\n\t\tthis.stateMachine.currentState.onHit.call(this);\n\t};\n\n\tthis.onFalling = function() {\n\t\tthis.stateMachine.currentState.onFall.call(this);\n\t};\n\n\tthis.onFloor = function() {\n\t\tthis.stateMachine.currentState.onFloor.call(this);\n\t};\n\n\tthis.update = function() {\n\n\t\tif(!this.dead) {\n\t\t\tdoPhysics(this, this.velocity);\n\t\t}\n\n\t};\n\n\tthis.draw = function() {\n\n\t\tif(this.dead &&  timer.now < this.deathTime+1100) {\n\t\t\tvar alpha = _Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].fastCosineInterpolate(this.deathTime+100,this.deathTime+1100, timer.now);\n\t\t\tcontext.globalAlpha = 1-Math.min(alpha,1);\n\t\t\tthis.currentAnim.draw(this.position.x + this.offset.x, this.position.y + this.offset.y);\n\t\t\tcontext.globalAlpha = 1.0;\n\t\t} else if(!this.dead) {\n\t\t\tthis.currentAnim.update();\n\t\t\tthis.currentAnim.draw(this.position.x + this.offset.x, this.position.y + this.offset.y);\n\t\t}\n\n\t};\n\n};\n\n/**\n * RAFCTOR:\n * - a moving platform can have a set of frame points that define positions in space for the platform\n * - these positions are interpolated during time\n * - its improtant, that movement is always the same speed\n * - there should be at least two modes:\n *   + loop mode (moves from last pos to start pos) and\n *   + return mode (goes back all points to the start point)\n *   + fall after last point.\n *   + manual path definition by function f(time) -> (x,y)\n *   + different interpolation method: linear, cosine, spline\n */\nfunction MovingPlatform(xpos, ypos) {\n\tthis.position = {x: xpos, y: ypos};\n\tthis.size = {width: 16*3, height: 16};\n\tthis.animSheet = new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16);\n\tthis.xstart  =xpos;\n\tthis.ystart  =ypos;\n\tthis.anims = {};\n\tthis.addAnim = function(name, time, sequence) {\n\t\tthis.anims[name] = new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](this.animSheet, time, sequence);\n\t};\n\n\tthis.init = function() {\n\t\tthis.addAnim('animRun1', 0.004, [56]);\n\t\tthis.addAnim('animRun2', 0.004, [57]);\n\t\tthis.addAnim('animRun3', 0.004, [58]);\n\t\tthis.currentAnim = this.anims.animRun1.rewind();\n\t};\n\n\tthis.init();\n\n\tthis.update = function() {\n\t\tthis.oldx = this.position.x;\n\t\tthis.oldy = this.position.y;\n\t\tvar sin = sinLookupTable[(Math.round(timer.now *0.09) ) % 512];\n\t\tthis.position.x = Math.round(this.xstart + ((sin+1.0) * (5*16) * 0.5));\n\n\t\tvar cos = cosLookupTable[(Math.round(timer.now *0.09) ) % 512];\n\t\t//this.position.y = Math.round(this.ystart - ((cos+1.0) * (5*16) * 0.5));\n\n\t};\n\n\n\tthis.draw = function() {\n\t\tthis.anims.animRun1.draw(this.position.x  + 0*16, this.position.y);\n\t\tthis.anims.animRun2.draw(this.position.x  + 1*16, this.position.y);\n\t\tthis.anims.animRun3.draw(this.position.x  + 2*16, this.position.y);\n\n\t};\n\n\t\tthis.contains =function(x, y) {\n\t\treturn x >= this.position.x && x <= this.position.x+this.size.width-1 &&\n\t\t       y >= this.position.y && y <= this.position.y+this.size.height-1;\n\t};\n}\n\nfunction Knall(xpos, ypos) {\n\n\tthis.size = {width: 24, height: 32};\n\n\n\tthis.velocity = {x: 0.0,y: 0.0};\n\tthis.offset = {x: 0, y: 1};\n\tthis.position = {x: xpos, y: ypos};\n\tthis.isJumping = false;\n\tthis.collisionCircle = new _Collision__WEBPACK_IMPORTED_MODULE_5__[\"Circle\"](this.position, 8.0);\n\n\t/**\n\t * A factor, indicating with which force the entity will bounce back after a\n\t * collision. With a .bounciness set to 1, the entity will bounce back with\n\t * the same speed it has hit the other entity/collision map. Default 0.\n\t */\n\tthis.bounciness = 0.0;\n\tthis.jumpspeed = 3;\n\tthis.gravity = 0.0;//1.7;\n\n\tthis.anims = {};\n\tthis.dead = false;\n\tthis.deathTime =0;\n\n\tthis.animSheet = new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/knall.png */ \"./src/assets/images/knall.png\"), 24, 32);\n\n\tthis.anims = {};\n\tthis.moveup = false;\n\n\tthis.back = true;\n\tthis.addAnim = function(name, time, sequence) {\n\t\tthis.anims[name] = new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](this.animSheet, time, sequence);\n\t};\n\n\tthis.init = function() {\n\t\tthis.addAnim('animRun', 0.004, [0]);\n\t\tthis.currentAnim = this.anims.animRun.rewind();\n\t};\n\n\tthis.init();\n\n\tthis.onFalling = function() {\n\n\t};\n\n\tthis.onFloor = function() {\n\t\thitTime = timer.now;\n\t\tthis.isJumping = true;\n\t\tthis.jumpspeed = -1.2;\n\t\tthis.gravity = 0.0;\n\n\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().THWOMP.pause();\n\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().THWOMP.currentTime = 0.0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().THWOMP.play();\n\t};\n\n\tthis.onHit = function() {\n\t\tthis.gravity = 0.0;\n\t\tthis.jumpspeed = 0.0;\n\t\tthis.isJumping = true;\n\t\tthis.back = true;\n\t};\n\n\tthis.xoff = 0.0;\n\tthis.update = function() {\n\t\tvar center = (this.position.x + this.size.width/2);\n\t\tvar dist = Math.abs(center - (player.position.x + player.width/2));\n\t\tif(dist < (12+8) && this.back) {\n\t\t\tthis.gravity =1.7;\n\t\t\tthis.back = false;\n\t\t\tthis.xoff = 0.0;\n\t\t} else if(dist < (12+8+16) && this.back) {\n\t\t\tthis.xoff = 1*sinLookupTable[((timer.now)|0)%0x1ff];\n\t\t}\n\n\t\tdoPhysics(this, this.velocity);\n\t};\n\n\tthis.draw = function() {\n\t\tthis.currentAnim.draw(this.position.x +this.xoff, this.position.y);\n\t};\n\n}\n\nvar platforms = [];\nplatforms.push(new MovingPlatform(16*31,16*6));\nplatforms.push(new MovingPlatform(16*31,16*10));\n\nvar fireballs = [];\nfireballs.push(new Fireball(16*20,16*8));\n\nvar knall = new Knall(16*24+4, 16*1);\n\nfunction Goomba(xpos, ypos) {\n\n\tthis.size = {width: 16, height: 16};\n\tthis.velocity = {x: 0.49,y: 0.0};\n\tthis.offset = {x: 0, y: 1};\n\tthis.position = {x: xpos, y: ypos};\n\tthis.isJumping = false;\n\tthis.collisionCircle = new _Collision__WEBPACK_IMPORTED_MODULE_5__[\"Circle\"](this.position, 8.0);\n\n\t/**\n\t * A factor, indicating with which force the entity will bounce back after a\n\t * collision. With a .bounciness set to 1, the entity will bounce back with\n\t * the same speed it has hit the other entity/collision map. Default 0.\n\t */\n\tthis.bounciness = 1.0;\n\tthis.jumpspeed = 3;\n\tthis.gravity = 0.4;\n\tthis.animSheet = new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16);\n\tthis.anims = {};\n\tthis.dead = false;\n\tthis.deathTime =0;\n\n\t/**\n\t * TODO: implement state charts like proposed by harel, i.e.\n\t * timers that fire transitions after a given time in a state!\n\t */\n\tthis.stateMachine = {\n\t\tstates: {\n\t\t\tWALK: {\n\t\t\t\tonHit: function() {\n\t\t\t\t\tthis.velocity.x *= -1;\n\t\t\t\t\t// no state transition, reflexiv transition\n\t\t\t\t},\n\t\t\t\tonFall: function() {\n\t\t\t\t\tthis.currentAnim = this.anims.animStanding;\n\t\t\t\t\t//this.velocity.x = 0;\n\t\t\t\t\tthis.stateMachine.currentState = this.stateMachine.states.FALLING;\n\t\t\t\t},\n\t\t\t\tonFloor: function() {\n\n\t\t\t\t},\n\t\t\t\tonTimeOut: function() {\n\t\t\t\t\t// check timeout condition and do transition if needed!\n\t\t\t\t}\n\t\t\t},\n\t\t\tFALLING: {\n\t\t\t\tonHit: function() {},\n\t\t\t\tonFall: function() {},\n\t\t\t\tonFloor: function() {\n\t\t\t\t\tthis.velocity.x = 0.49;\n\t\t\t\t\tthis.velocity.y = 0.0;\n\t\t\t\t\tthis.currentAnim = this.anims.animRun;\n\t\t\t\t\tthis.stateMachine.currentState = this.stateMachine.states.WALK;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcurrentState: null\n\t};\n\n\tthis.stateMachine.currentState = this.stateMachine.states.WALK;\n\n\tthis.addAnim = function(name, time, sequence) {\n\t\tthis.anims[name] = new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](this.animSheet, time, sequence);\n\t};\n\n\tthis.init = function() {\n\t\tthis.addAnim('animRun', 0.004, [43, 44]);\n\t\tthis.addAnim('animStanding', 0.004, [43]);\n\t\tthis.addAnim('animDead', 0.004, [45]);\n\t\tthis.currentAnim = this.anims.animRun.rewind();\n\t};\n\n\tthis.init();\n\n\tthis.collides = function(player) {\n\n\t\tif(this.dead) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.collisionCircle.intersects(player.collisionCircle)) {\n\n\t\t\tif(!player.dead && player.position.y < this.collisionCircle.center.y) {\n\t\t\t\tthis.dead = true;\n\t\t\t\tplayer.position.y = this.position.y - player.height;\n\t\t\t\tplayer.isJumping = true;\n\t\t\t\tplayer.jumpspeed = -9;\n\t\t\t\tplayer.animation='jumping.right';\n\t\t\t\t//http://stackoverflow.com/questions/14926306/javascript-play-sound-on-hover-stop-and-reset-on-hoveroff\n\t\t\t\t//https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_HTML5_audio_and_video\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.pause();\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.currentTime = 0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.volume = 1.0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.play();\n\t\t\t\tthis.deathTime = timer.now;\n\t\t\t\tthis.currentAnim = this.anims.animDead.rewind();\n\t\t\t\tplayer.points += 50;\n\t\t\t} else if(!player.dead){\n\t\t\t\tplayer.dead=true;\n\n\t\t\t\tplayer.animation='dieing';\n\t\t\t\tplayer.deathTime = timer.now;\n\n\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND.pause();\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.pause();\n\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.currentTime = 0.0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.play();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @see http://www.bennadel.com/blog/2265-changing-the-execution-context-of-javascript-functions-using-call-and-apply.htm\n\t * for description of call method\n\t */\n\tthis.onHit = function() {\n\t\tthis.stateMachine.currentState.onHit.call(this);\n\t};\n\n\tthis.onFalling = function() {\n\t\tthis.stateMachine.currentState.onFall.call(this);\n\t};\n\n\tthis.onFloor = function() {\n\t\tthis.stateMachine.currentState.onFloor.call(this);\n\t};\n\n\tthis.update = function() {\n\n\t\tif(!this.dead) {\n\t\t\tdoPhysics(this, this.velocity);\n\t\t}\n\n\t};\n\n\tthis.draw = function() {\n\t\tthis.currentAnim.update();\n\n\n\t\tvar alpha = _Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].fastCosineInterpolate(this.deathTime+100,this.deathTime+1100, timer.now)\n\t\t\t\t// fade pit eme,y after death! :)\n\t\t\t\tif(this.dead)\n\t\t\t\tcontext.globalAlpha = 1-Math.min(alpha,1);\n\t\t\t\tthis.currentAnim.draw(this.position.x + this.offset.x, this.position.y + this.offset.y);\n\t\t\t\tcontext.globalAlpha = 1.0;\n\n\n\t};\n\n};\n\nvar goomba = new Goomba(16*12,16*2);\nvar jumper = new Jumper(16*12,16*2);\n\nfunction QuestionBox(xpos, ypos) {\n\tthis.size = {width: 16, height: 16};\n\tthis.position = {x: xpos, y: ypos};\n\tthis.xcenter = 16*17;\n\tthis.hitTime =0;\n\tthis.empty = false;\n\tthis.isFilled = true;\n\n\tthis.anims = {\n\t\tquestion: \t\tnew _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.003, [11,12,13,14]),\n\t\tused: \t\tnew _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.003, [72])\n\t\t};\n\n\t\tthis.currentAnim = this.anims.question.rewind();\n\t\tmush.active = false;\n\t\tthis.draw = function() {\n\t\t// TODO: if visible do things!\n\t\tthis.currentAnim.update();\n\t\t//this.position.x = this.xcenter +sinLookupTable[((timer.now>>5)|0)%0x1ff]*32\n\t\tvar alpha = _Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].fastCosineInterpolate(this.hitTime+0,this.hitTime+100, timer.now)\n\t\t\t\t\t-_Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].fastCosineInterpolate(this.hitTime+100,this.hitTime+200, timer.now);\n\n\t\tif(timer.now >= (this.hitTime+200) && timer.now <= (this.hitTime+500) && this.isFilled==false) {\n\t\t\tmush.active = true;\n\t\tmush.position.y=this.position.y - 16*_Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].fastCosineInterpolate(this.hitTime+200,this.hitTime+500, timer.now);\n\t}\n\t\tif(this.empty==true &&timer.now > (this.hitTime+600)) {this.empty =false;\n\t\tthis.currentAnim = this.anims.used;\n\t\t\tmush.jumpspeed = -4;\n\t\t\t\t\tmush.isJumping = true;\n\t\t\t\t\tmush.velocity.x=1.7;\n\t\t\t\t\tmush.gravity = 0.3;\n\n\t\t\t\t}\n\n\n\t\tthis.currentAnim.draw(this.position.x, this.position.y-alpha*8);\n\n\t};\n\n\tthis.hit = function () {\n\t\t\tif(this.isFilled==true) {\n\t\t\t\tthis.isFilled=false;\n\t\t\t\tthis.empty=true;\n\t\t\tthis.hitTime = timer.now;\n\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.pause();\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.currentTime = 0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.volume = 1.0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.play();\n\t\t\t}\n\t};\n\n\tthis.contains =function(x, y) {\n\t\treturn x >= this.position.x && x <= this.position.x+this.size.width-1 &&\n\t\t       y >= this.position.y && y <= this.position.y+this.size.height-1;\n\t};\n}\n\nfunction Monster(xpos, ypos) {\n\n\tthis.width= 16;\n\tthis.height= 16;\n\n\tthis.size = {width: 16, height: 16};\n\tthis.velocity = {x: -0.49,y: 0.0};\n\tthis.offset = {x: 0, y: 1};\n\tthis.position = {x: xpos, y: ypos};\n\tthis.isJumping = false;\n\tthis.gravity = 0.4;\n\tthis.visible = true;\n\tthis.debug=true;\n\tthis.deathTime =0;\n\tthis.speed =0.5;\n\tthis.jumpspeed = 3;\n\tthis.right = false;\n\n\t/**\n\t * SETUP ANIMATIONS\n\t */\n\tthis.anims = {\n\t\tanimRun: \t\tnew _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.003, [28, 29]),\n\t\tanimDie: \t\tnew _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.003, [30, 31], true),\n\t\tanimSpikesUp: \tnew _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.01, [27, 26], true),\n\t\tanimSpikesDown: new _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.01, [26, 27], true)\n\t};\n\n\tthis.currentAnim = this.anims.animRun.rewind();\n\n\t/**\n\t * SETUP STATES\n\t */\n\tthis.states = {\n\t\tWALKING: 0,\n\t\tSPIKES: 1,\n\t\tDEAD: 2,\n\t};\n\n\tthis.currentState = this.states.WALKING;\n\tthis.startTime = timer.now + (Math.random()*5000);\n\tthis.collides = function(player) {\n\t\tif(!this.visible) return;\n\t\tvar center1x = this.position.x + this.size.width/2;\n\t\tvar center1y = this.position.y + this.size.height/2;\n\t\tvar center2x = player.position.x + player.width/2;\n\t\tvar center2y = player.position.y + player.height/2;\n\t\tvar distx = center1x - center2x;\n\t\tvar disty = center1y - center2y;\n\t\t//console.log(center2x + \" \" + center2y);\n\t\t//console.log(\"dist \"+Math.sqrt((distx*distx)+(disty*disty)) );\n\t\tif(Math.sqrt((distx*distx)+(disty*disty)) <= this.width/2 + player.width/2) {\n\n\t\t\tif(!player.dead &&center2y < center1y && !(this.currentState == this.states.SPIKES)) {\n\t\t\t\tthis.visible = false;\n\t\t\t\tplayer.position.y = this.position.y - player.height;\n\t\t\t\tplayer.isJumping = true;\n\t\t\t\tplayer.jumpspeed = -9;\n\t\t\t\tplayer.animation='jumping.right';\n\t\t\t\t//http://stackoverflow.com/questions/14926306/javascript-play-sound-on-hover-stop-and-reset-on-hoveroff\n\t\t\t\t//https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_HTML5_audio_and_video\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.pause();\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.currentTime = 0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.volume = 1.0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().STOMP.play();\n\t\t\t\tthis.deathTime = timer.now;\n\t\t\t\tthis.currentAnim = this.anims.animDie.rewind();\n\t\t\t\tplayer.points += 50;\n\t\t\t} else if(!player.dead){\n\t\t\t\tplayer.dead=true;\n\n\t\t\t\tplayer.animation='dieing';\n\t\t\t\tplayer.deathTime = timer.now;\n\n\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND.pause();\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.pause();\n\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.currentTime = 0.0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.play();\n\t\t\t}\n\t\t}\n\t};\n\n\n\n\tthis.onFalling = function() {\n\n\t};\n\n\tthis.onFloor = function() {\n\n\t};\n\n\tthis.onHit = function() {\n\t\tthis.velocity.x *= -1;\n\t\tthis.right = !this.right;\n\t};\n\n\tthis.update = function() {\n\t\t/**\n\t\t * update:\n\t\t * - artificial intelligence\n\t\t * - physical simulation\n\t\t */\n\t\tif(this.visible) {// not ded! ;) FIX THIS!!\n\t\t\tvar elapsedInSec = ((timer.now - this.startTime) / 1000) | 0;\n\t\t\tif(this.currentState != this.states.SPIKES && (elapsedInSec % 10) < 5) {\n\t\t\t\tthis.currentState =this.states.SPIKES;\n\t\t\t\tthis.currentAnim = this.anims.animSpikesUp.rewind();\n\t\t\t\tthis.anims.animSpikesDown.rewind();\n\t\t\t} else if(this.currentState != this.states.WALKING && !((elapsedInSec % 10) < 5)) {\n\t\t\t\tthis.currentState =this.states.WALKING;\n\t\t\t\tthis.currentAnim = this.anims.animRun;//rewind();\n\t\t\t}\n\n\t\t\tif(this.currentState == this.states.SPIKES &&  (elapsedInSec % 10) >= 4) {\n\t\t\t\tthis.currentAnim = this.anims.animSpikesDown;\n\t\t\t}\n\n\t\t\tif(this.currentState == this.states.WALKING)\n\t\t\t\t//moveMushroom(this);\n\t\t\t\tdoPhysics(this, this.velocity);\n\n\t\t\tif(this.right) {\n\t\t\t\tthis.currentAnim.flipx = true;\n\t\t\t} else {\n\t\t\t\tthis.currentAnim.flipx = false;\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.draw = function() {\n\t\t// TODO: if visible do things!\n\t\tthis.currentAnim.update();\n\t\tif(this.visible) {\n\t\t\tthis.currentAnim.draw(this.position.x, this.position.y+1);\n\t\t} else {\n\n\t\t\tif((timer.now-this.deathTime) * 0.003 < 5 ) {\n\t\t\t\tvar alpha = _Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].fastCosineInterpolate(this.deathTime+100,this.deathTime+1100,timer.now)\n\t\t\t\t// fade pit eme,y after death! :)\n\t\t\t\tcontext.globalAlpha = 1-Math.min(alpha,1);\n\t\t\t\tthis.currentAnim.draw(this.position.x, this.position.y+1);\n\t\t\t\tcontext.globalAlpha = 1.0;\n\t\t\t} else { //remove from collection\n\t\t\t\t// this is buggy since the  draw cpde loops over the array size and this method reduces it while looping\n\t\t\t\t//monsterCollection.remove(this);\n\n\t\t\t}\n\t\t}\n\t};\n\n}\n\nvar monsterCollection = new _Collection__WEBPACK_IMPORTED_MODULE_7__[\"Collection\"]();\nmonsterCollection.add(new Monster(16*9,16*7));\nmonsterCollection.add(new Monster(16*17,16*6));\nmonsterCollection.add(new Monster(16*22,16*10));\n\nvar flame = new Flame(16*6,16*11);\nvar flame2 = new Flame(16*12,16*11);\n\nvar coinCollection = new _Collection__WEBPACK_IMPORTED_MODULE_7__[\"Collection\"]();\n\ncoinCollection.add(new Coin(32,16));\ncoinCollection.add(new Coin(16,16*10));\ncoinCollection.add(new Coin(16*3,16*7));\ncoinCollection.add(new Coin(16*7,16*7));\ncoinCollection.add(new Coin(16,16*5));\ncoinCollection.add(new Coin(16*31,16*5));\ncoinCollection.add(new Coin(16*32,16*5));\ncoinCollection.add(new Coin(16*33,16*5));\ncoinCollection.add(new Coin(16*34,16*5));\ncoinCollection.add(new Coin(16*35,16*5));\ncoinCollection.add(new Coin(16*36,16*5));\ncoinCollection.add(new Coin(16*37,16*5));\ncoinCollection.add(new Coin(16*38,16*5));\n\ncoinCollection.add(new Coin(16*49,16*6));\ncoinCollection.add(new Coin(16*49,16*7));\ncoinCollection.add(new Coin(16*49,16*8));\n\nvar Keyboard = {\n\tpressed: [],\n\n\tLEFT: 37,\n\tUP: 38,\n\tRIGHT: 39,\n\tDOWN: 40,\n\tCTRL: 17,\n\tALT: 18,\n\tENTER: 13,\n\tW: 'W'.charCodeAt(0),\n\tE: 'E'.charCodeAt(0),\n\tR: 'R'.charCodeAt(0),\n\n\tisPressed: function(keyCode) {\n\t\treturn this.pressed[keyCode];\n\t},\n\n\tsetKeyStatus: function(event, status) {\n\t\tthis.pressed[event.keyCode] = status;\n\n\n\t\tif(event.keyCode ==13 && status==true) {\n\t\t\ttoggleFullScreen();\n\t\t}\n\t}\n};\n\nfunction Animation(name, frames, speed) {\n\tthis.name = name;\n\tthis.frames = frames;\n\tthis.speed = speed;\n}\n\nvar time = 30;\n\nvar question = new QuestionBox(16*52, 16*8);\n\nfunction Player() {\n\n\tthis.position = {x: 16*55, y: 16*2};\n\tthis.collisionCircle = new _Collision__WEBPACK_IMPORTED_MODULE_5__[\"Circle\"](this.position, 8.0);\n\tthis.lives = 5; // start with 3 lives!\n\tthis.coins = 0;\n\tthis.points = 0;\n\tthis.width = 16-4;\n\tthis.height = 14;\n\tthis.isJumping = false;\n\tthis.gravity = 1.1;//1.3,\n\tthis.speed = 2.9; // can be changed if mario is running!\n\tthis.debugMode = true;\n\tthis.frames = [0,2];\n\tthis.animation = 'walking.left';\n\tthis.animations = {\n\t\t'standing.left': new Animation('run:left', [0], 0.008),\n\t\t'standing.right': new Animation('run:left', [2], 0.008),\n\t\t'walking.left': new Animation('run:left', [0,1], 0.008),\n\t\t'walking.right': new Animation('run:left', [2,3], 0.008),\n\t\t'jumping.left': new Animation('run:left', [4], 0.008),\n\t\t'jumping.right': new Animation('run:left', [5], 0.008),\n\t\t'dieing': new Animation('run:left', [6], 0.008),\n\t\t'climbing': new Animation('run:left', [7,8], 0.004),\n\t\t'climbing.pause': new Animation('run:left', [7], 0.008)\n\t};\n\n\tthis.anims = {\n\t\tanimStanding: \tnew _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.003, [0]),\n\t\tanimWalking: \tnew _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.003, [0, 1]),\n\t\tanimJumping: \tnew _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.003, [4]),\n\t\tanimdieing: \tnew _Animation__WEBPACK_IMPORTED_MODULE_6__[\"Animation2\"](new _AnimationSheet__WEBPACK_IMPORTED_MODULE_2__[\"AnimationSheet\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), 16, 16), 0.003, [6]),\n\t};\n\n\tthis.currentAnim = this.anims.animStanding.rewind();\n\n\tthis.dead= false;\n\tthis.deathTime= 0;\n\n\tthis.intersects = function(coin) {\n\n\t\treturn !(coin.x > this.position.x+this.width-1\n        \t|| coin.x+15 < this.position.x\n        \t|| coin.y > this.position.y+this.height-1\n        \t|| coin.y+15 < this.position.y);\n\n\t};\n\n\tthis.draw = function(context) {\n\n\t\tvar addDeathY=0;\n\t\tif(this.dead) {\n\t\t\tvar elapsed = timer.now -this.deathTime;\n\t\t\taddDeathY = (1-_Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].fastCosineInterpolate(500, 2500, elapsed))*60-60+_Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].fastCosineInterpolate(2500, 3500, elapsed)*80;\n\n\t\t\t//addDeathY = Math.floor(-Math.sin(()*0.0005) * 16*10);\n\n\t\t}\n\n\t\t\tvar pos = Math.floor((timer.now*this.animations[this.animation].speed)%this.animations[this.animation].frames.length);\n\n\t\t\tdrawTile(this.animations[this.animation].frames[pos], Math.floor(this.position.x)-2, Math.floor(this.position.y)-1+addDeathY);\n\t};\n};\n\nvar player = new Player();\n\nvar world = [\n\t[ 0, 0,33,33,33,33,33,33,33,33,33, 0,33,33,33,33,33,33,33, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,33, 6, 7, 7, 7, 7, 7, 7, 7, 8,33,33,33,33,33,33,33,33,33, 33,33,33,33, 33,33,33,33, 33],\n\t[ 0, 5,33,33,33,33,33,33,33,33,33, 5,33,33,33,33,33,33,33, 0, 0, 0, 0, 0,33,33, 0, 0, 0,33, 9,10,10,10,10,10,10,10,11,33,33,33,33,33,33,33,33,33, 33,33,33,33, 33,33,33,33, 33],\n\t[ 0, 5, 2,33,33,32,33,33,33,33,33, 5,33,33,33,33,33,33,33, 0, 0, 0, 0, 0,33,33,33,33,33,33, 9,10,10,10,10,10,10,10,11,33,33,33,33,33,33,33,33,33, 33,33,33,33, 33,33,33,33, 33],\n\t[ 0, 5,33, 2, 2, 2,33,33,32,32,33, 5,33,33,33,33,33,33,33, 0, 0, 0, 0, 0,33,33,33,33,33,33, 9,10,10,10,10,10,10,10,11,33,33, 0,33,33,33,33,33,33, 33,33,33,33, 33,33,33,33, 0],\n\t[ 0, 5,33,33,33,33,33,33,33,33,33, 5,32,32,32,32,33,33,33,33,33,33,33,33,33,33,33,33,33,33,12,13,13,13,13,13,13,13,14,33,33, 5,33,33,33,33,33,33, 33,33,33,33, 33,33,33,33, 0],\n\t[ 0, 5,33,33,33,33,33,33, 2,33, 2, 5,33,33, 0, 0,33,33,33,33,33,33,33,33,33,33,33,33, 0, 0, 0,33,33,33,33,33,33,33,33, 0, 0, 5, 0,33,33,33,33,33, 33,33,33,33, 33,33,33,33, 0],\n\t[ 0, 5,33,33,33,33,33,33,33,33,33, 5,33,33, 0, 0,33,33,33,33,33,33,33,33,33,33,33,33, 0, 0, 0,33,33,33,33,33,33,33,33, 0, 0, 5, 0,33,33,33,33,33, 33,33,33,33, 33,33,33,33, 0],\n\t[ 0, 5,33,33,33,33,33,33,33,33,33, 5,33,33, 0, 0, 0, 0, 0, 4,33,33,33,33,33,33,33,33, 0, 0, 0,33,33,33,33,33,33,33,33, 0, 0, 5, 0,33,33,33,33, 0, 33,33,33,33, 33,33,33,33, 0],\n\t[ 0, 5,33, 0, 0,33,33, 0, 0, 0, 0, 0,33,33, 0, 0, 0, 0, 0, 0,33,33,33,33, 0, 0, 0, 0, 0, 0,33,33,33,33, 0, 0,33,33,33,33,33, 5, 0,33,33,33, 0, 0, 33,33,33,33, 33,33,33,33, 0],\n\t[ 0, 5,33, 0, 0,33,33,33,33,33,33,33,33,33, 0, 0, 0, 0, 0, 0,33,33,33,33, 0, 0, 0, 0, 0, 0,33,33,33,33, 0, 0,33,33,33,33,33, 5, 0,33,33, 0, 0, 0, 0,33,33,33, 33,33,33,33, 0],\n\t[ 0, 5,33, 0, 0,33,33,33,33,33,33,33,33,33, 0, 0, 0, 0, 0, 0,33,33,33,33, 0, 0, 0, 0, 0, 0, 0,33,33,33,33,33,33,33,33, 0, 0, 0, 0,33, 0, 0, 0, 0, 0,33,33,33, 33,33,33,33, 0],\n\t[ 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,0,0,0,0,0,0,0,0]\n];\n\nvar background = [\n\t[34, 34, 34, 34],\n\t[34, 35, 36, 37],\n\t[38, 39, 40, 41],\n\t[42, 40, 40, 40],\n\t[43, 40, 40, 40],\n\t[43, 40, 40, 40],\n\t[43, 40, 40, 40],\n\t[43, 40, 40, 40],\n\t[43, 40, 40, 40],\n\t[43, 40, 40, 40],\n\t[43, 40, 40, 40],\n\t[45, 46, 40, 44]\n];\n\nfunction drawTile(tile, x, y) {\n\tvar xoff= tile & 15;\n\tvar yoff= (tile / 16) | 0;\n\tcontext.drawImage(mario, xoff*16, yoff*16, 16, 16, x, y, 16, 16);\n}\n\n/*\n * Draws the given text at position (x,y)\n * important: xoff and yoff need image width / tile width as constant\n */\nfunction drawText(x, y, text) {\n\tfor(var c=0; c <text.length; c++) {\n\t\tvar asciiCode = text.charCodeAt(c);\n\t\tvar index = asciiCode - 32;\n\t\tvar xoff=index%32; // mod image with /tile width!\n\t\tvar yoff=(index/32) | 0;\n\t\tcontext.drawImage(font, xoff*8, yoff*8, 8, 8,  x + 8 * c, y, 8, 8);\n\t}\n}\n\n/**\n * change this method accoinrd to the bound handling that is wanted for off level\n * walking and jumping: you can return false or true for horizontal and vertical offscren\n * running. also refactir to set the max and min x,y values based on the level size\n * and not hardcoded!!!\n */\n\n\n /**\n  * PROBLEM: contains test is WROOONG in this section! since the collision response is tailored\n  * to work only with tile array boundarys alignments to 16*16\n  * TODO: do a special check for moving tiles that are not aligned. Handle collision cases\n  * that can happen when the moving object moves into the player!\n  *\n  */\nfunction hit(x, y) {\n\tif(((y/16)|0) > 11 || ((y/16)|0) < 0) return false; // set to max numcolumns\n\t//var boxContains = question.contains(x,y);\n\treturn TileSet[world[((y/16)|0)][((x/16)|0)]].tileType==TileType.SOLID;// || boxContains;\n}\n\n\nfunction onCloud(x, y) {\n\tif(((y/16)|0) > 11 || ((y/16)|0) < 0) return false; // set to max numcolumns\n\treturn TileSet[world[((y/16)|0)][((x/16)|0)]].tileType==TileType.CLOUD;\n}\n\nfunction onLadder(x, y) {\n\tif(((y/16)|0) > 11 || ((y/16)|0) < 0) return false; // set to max numcolumns\n\treturn TileSet[world[((y/16)|0)][((x/16)|0)]].tileType==TileType.LADDER;\n}\n\n// TODO: remove floor\nfunction onSlope(x, y) {\n\tif(((y/16)|0)>11 ||Math.floor(y/16)<0 ) return false; // set to max numcolumns\n\treturn world[Math.floor(y/16)][Math.floor(x/16)]==111; //wrong id\n}\n\n\n\nvar countDownStart = timer.now;\nvar timeOld;\n\nfunction update() {\n\ttimer.update()\n\tfor(var x in TileSet) {\n\t\tTileSet[x].update();\n\t}\n\n\ttimeOld = time;\n\ttime = Math.max(30 - (((timer.now - countDownStart) / 1000)|0) ,0);\n\n\n\t//var oldY = player.position.y;\n\n\n\t/**\n\t * TODO:\n\t * - update all platforms here\n\t * - check whether platfrom grabbed player or entity\n\t * - if player has platform, then move according to platform AND do collision check againts tile map\n\t */\n\n\tfor(var i=0; i < platforms.length; i++) {\n\t\tplatforms[i].update();\n\t}\n\n\tif(player.platform != null) {\n\t\tvar velx = player.platform.position.x -player.platform.oldx;\n\t\tvar vely = player.platform.position.y -player.platform.oldy;\n\n\t\tif(velx < 0) {\n\t\t\tif(!hit(player.position.x+velx, player.position.y) &&\n\t\t   !hit(player.position.x+velx, player.position.y+(player.height-1)))  {\n\t\t\tplayer.position.x+=velx;\n\n\t\t\t} else {\n\t\t\t\tplayer.position.x = Math.floor(player.position.x/16)*16;\n\t\t\t}\n\t\t} else if(velx > 0){\n\t\t\tif(!hit(player.position.x+(player.width-1)+velx, player.position.y) &&\n\t\t   !hit(player.position.x+(player.width-1)+velx, player.position.y+(player.height-1))) {\n\t\t\t\tplayer.position.x+=velx;\n\t\t\t} else {\n\t\t\t\tplayer.position.x = (Math.floor((player.position.x+(player.width-1)+velx)/16))*16-player.width;\n\t\t\t}\n\n\t\t}\n\n\t\tplayer.position.y +=vely;\n\t}\n\n\tif(!player.dead) {\n\n\t\tif(Keyboard.isPressed(Keyboard.W)) {\n\t\t\tplayer.speed = 4.2; // run\n\t\t} else {\n\t\t\tplayer.speed = 2.9;\n\t\t}\n\n\tif((Keyboard.isPressed(Keyboard.UP) || Keyboard.isPressed(Keyboard.DOWN)) &&\n\t\t(onLadder(player.position.x,player.position.y) ||\n\t\t\tonLadder(player.position.x+player.width-1,player.position.y)) ) {\n\n\t\tplayer.platform=null;\n\n\t\tif(Keyboard.isPressed(Keyboard.UP))\n\t\tif(Keyboard.isPressed(Keyboard.UP) && !hit(player.position.x, player.position.y-player.speed) &&\n\t\t   !hit(player.position.x+(player.width-1), player.position.y-player.speed) ){\n\t\t\tplayer.position.y +=-player.speed;\n\n\t\t} else {\n\t\t\tplayer.position.y = (Math.floor((player.position.y)/16))*16;\n\t\t}\n\n\t\tif(Keyboard.isPressed(Keyboard.DOWN)){\n\n\t\t\tfor(var i=0; i < platforms.length; i++) {\n\t\t\t\tvar onPlatform =!platforms[i].contains(player.position.x+(player.width-1), player.position.y+(player.height-1)+1) &&\n\t\t\t\t\t!platforms[i].contains(player.position.x, player.position.y+(player.height-1)+1);\n\t\t\t\tif(onPlatform) break;\n\t\t\t}\n\n\t\t\tif(Keyboard.isPressed(Keyboard.DOWN) && !hit(player.position.x, player.position.y+(player.height-1)+player.speed) &&\n\t\t   \t\t!hit(player.position.x+(player.width-1), player.position.y+(player.height-1)+player.speed) &&\n\t\t\t\tonPlatform){\n\t\t\t\tplayer.position.y +=+player.speed;\n\t\t\t} else {\n\t\t\t\tplayer.position.y = (Math.floor((player.position.y+(player.height-1)+player.speed)/16))*16-player.height;\n\t\t\t}\n\t\t}\n\n\t\tplayer.gravity = 0;\n\t\tplayer.onLadder = true;\n\t\tplayer.isJumping = false;\n\t\tplayer.animation = \"climbing\";\n\t} else if(player.onLadder) {\n\t\tplayer.animation = \"climbing.pause\";\n\t}\n\n\tif(!(onLadder(player.position.x,player.position.y) ||\n\t\t\tonLadder(player.position.x+player.width-1,player.position.y))) {\n\t\tplayer.gravity = 1.1;\n\t\tplayer.onLadder = false;\n\t}\n\n\tif(Keyboard.isPressed(Keyboard.R)) {\n\t\tvar fball = fireballs[0];\n\t\tfball.position.x = player.position.x;\n\t\tfball.position.y = player.position.y;\n\t\tfball.inactive = false;\n\t\tfball.jumpspeed = 0;\n\t\tif(player.animation == 'standing.right') {\n\t\t\tfball.velocity = {x: 1.99,y: 0.4};\n\t\t\tfball.isJumping=true;\n\t\t}\n\t\telse {\n\t\t\tfball.velocity = {x: -1.99,y: 0.4};\n\t\t\tfball.isJumping=true;\n\t\t}\n\t}\n\n\tif(Keyboard.isPressed(Keyboard.E) && !player.isJumping) {\n\n\t\tif(player.onLadder) {\n\t\t\tplayer.isJumping = true;\n\t\t\tplayer.jumpspeed = -5;\n\t\t\tplayer.gravity = 1.1;\n\t\t\tplayer.onLadder = false;\n\t\t} else {\n\t\t\tplayer.isJumping = true;\n\t\t\tplayer.jumpspeed = -13;\n\t\t\tplayer.gravity = 1.1;\n\t\t}\n\t\tplayer.platform=null;\n\n\t\t//http://stackoverflow.com/questions/14926306/javascript-play-sound-on-hover-stop-and-reset-on-hoveroff\n\t\t//https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_HTML5_audio_and_video\n\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND2.pause();\n\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND2.currentTime = 0;\n\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND2.volume = 0.7;\n\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND2.play();\n\n\t\tif(player.animation=='walking.left' || player.animation=='standing.left')\n\t\t\tplayer.animation ='jumping.left';\n\t\telse\n\t\t\tplayer.animation ='jumping.right';\n\t}\n\n\tif(Keyboard.isPressed(Keyboard.RIGHT)) {\n\n\t\tvar onPlatform= false;\n\t\tfor(var i=0; i < platforms.length; i++) {\n\t\t\t\tvar onPlatform = platforms[i].contains(player.position.x+(player.width-1), player.position.y+(player.height-1)+1) ||\n\t\t\t\t\t\t\t\t platforms[i].contains(player.position.x, player.position.y+(player.height-1)+1);\n\t\t\t\tif(onPlatform) {\n\t\t\t\t\tplayer.platform = platforms[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\tif(!onPlatform) {\n\t\t\tplayer.platform = null;\n\t\t}\n\n\t\tif(player.onLadder == true)\n\t\t\t\tplayer.animation = \"climbing\";\n\t\t\telse\n\t\t\t\tplayer.animation='walking.right';\n\n\t\tif(!hit(player.position.x+(player.width-1)+player.speed, player.position.y) &&\n\t\t   !hit(player.position.x+(player.width-1)+player.speed, player.position.y+(player.height-1)) ||\n\t\t   onSlope(Math.floor(player.position.x)+Math.floor(player.width/2)+player.speed, Math.floor(player.position.y)+(player.height-1))) {\n\t\t\tplayer.position.x+=player.speed;\n\n\t\t//move left against entity\n\t\t\t\tif(question.contains(player.position.x+(player.width-1), player.position.y) ||\n\t\t\t\t\tquestion.contains(player.position.x+(player.width-1), player.position.y+(player.height-1) )) {\n\t\t\t\t\t\tplayer.position.x = question.position.x-player.width;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\tif(onSlope(Math.floor(player.position.x)+Math.floor(player.width/2), Math.floor(player.position.y)+(player.height-1))) {\n\t\t\t\tvar dist = Math.floor(player.position.x)+Math.floor(player.width/2)-\n\t\t\t\t\t\tMath.floor((Math.floor(player.position.x)+Math.floor(player.width/2))/16)*16;\n\t\t\t\t\t\t\t//console.log(dist);\n\n\t\t\t\tplayer.position.y = Math.floor((Math.floor(player.position.y)+(player.height-1))/16)*16-dist+1;\n\t\t\t}\n\t\t} else {\n\t\t\tplayer.position.x = (Math.floor((player.position.x+(player.width-1)+player.speed)/16))*16-player.width;\n\t\t}\n\t} else {\n\t\tif(player.animation=='walking.right')\n\t\t\tplayer.animation='standing.right';\n\t}\n\n\tif(Keyboard.isPressed(Keyboard.LEFT)) {\n\n\tvar onPlatform= false;\n\t\tfor(var i=0; i < platforms.length; i++) {\n\t\t\t\tvar onPlatform = platforms[i].contains(player.position.x+(player.width-1), player.position.y+(player.height-1)+1) ||\n\t\t\t\t\t\t\t\t platforms[i].contains(player.position.x, player.position.y+(player.height-1)+1);\n\t\t\t\tif(onPlatform) {\n\t\t\t\t\tplayer.platform = platforms[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\tif(!onPlatform) {\n\t\t\tplayer.platform = null;\n\t\t}\n\n\t\t\tif(player.onLadder == true)\n\t\t\t\tplayer.animation = \"climbing\";\n\t\t\telse\n\t\t\t\tplayer.animation='walking.left';\n\n\t\tif(!hit(player.position.x-player.speed, player.position.y) &&\n\t\t   !hit(player.position.x-player.speed, player.position.y+(player.height-1)) ||\n\t\t   onSlope(Math.floor(player.position.x)+Math.floor(player.width/2)-player.speed, Math.floor(player.position.y)+(player.height-1))) {\n\t\t\tplayer.position.x-=player.speed;\n\n\t\t\t// move left against entity\n\t\t\t\tif(question.contains(player.position.x, player.position.y) ||\n\t\t\t\t\tquestion.contains(player.position.x, player.position.y+(player.height-1) )) {\n\t\t\t\t\t\tplayer.position.x = question.position.x+question.size.width;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\tif(onSlope(Math.floor(player.position.x)+Math.floor(player.width/2), Math.floor(player.position.y)+(player.height-1))) {\n\t\t\t\tvar dist = Math.floor(player.position.x)+Math.floor(player.width/2)-\n\t\t\t\t\t\tMath.floor((Math.floor(player.position.x)+Math.floor(player.width/2))/16)*16;\n\t\t\t\t\t\t\t//console.log(dist);\n\n\t\t\t\tplayer.position.y = Math.floor((Math.floor(player.position.y)+(player.height-1))/16)*16-dist+1;\n\t\t\t}\n\n\t\t} else {\n\t\t\tplayer.position.x = Math.floor(player.position.x/16)*16;\n\t\t}\n\t}else {\n\t\tif(player.animation=='walking.left')\n\t\t\tplayer.animation='standing.left';\n\t}\n\t\t// same check as the falling down check!!!!\n\t\tvar isOnCloud = (onCloud(player.position.x, player.position.y+(player.height-1)+1) &&\n\t\t\t            !onCloud(player.position.x, player.position.y+(player.height-1)) ||\n\t\t\t\t     onCloud(player.position.x+(player.width-1), player.position.y+(player.height-1)+1) &&\n\t\t\t            !onCloud(player.position.x+(player.width-1), player.position.y+(player.height-1))\n\t\t\t            );\n\n\tvar onPlatform= false;\n\t\tfor(var i=0; i < platforms.length; i++) {\n\t\t\t\tvar onPlatform = platforms[i].contains(player.position.x+(player.width-1), player.position.y+(player.height-1)+1) ||\n\t\t\t\t\t\t\t\t platforms[i].contains(player.position.x, player.position.y+(player.height-1)+1);\n\t\t\t\tif(onPlatform) break;\n\t\t\t}\n\n\tvar onQuestion = question.contains(player.position.x, player.position.y+(player.height-1)+1) ||\n\t\t\t\t\tquestion.contains(player.position.x+(player.width-1), player.position.y+(player.height-1)+1 );\n\t//falling?\n\tif(!player.isJumping && !player.onLadder && !hit(player.position.x, player.position.y+(player.height-1)+1) &&\n\t   !hit(player.position.x+(player.width-1), player.position.y+(player.height-1)+1) &&\n\t   !onSlope(player.position.x+Math.floor(player.width/2), player.position.y+(player.height-1)) &&\n\t!isOnCloud && !onPlatform && !onQuestion\n\t   ) {\n\t\tplayer.jumpspeed = 0;\n\t\tplayer.isJumping = true;\n\t\tplayer.platform=null;\n\t\tif(player.animation=='walking.left' || player.animation=='standing.left')\n\t\t\tplayer.animation ='jumping.left';\n\t\telse\n\t\t\tplayer.animation ='jumping.right';\n\t}\n\n\tif(player.isJumping) {\n\n\t\tplayer.jumpspeed = player.jumpspeed + player.gravity;\n\t\tif(player.jumpspeed > 8) player.jumpspeed = 8;\n\n\t\tif(player.jumpspeed < 0) { //jumping up\n\n\t\t\tif(!hit(player.position.x, player.position.y+player.jumpspeed) &&\n\t\t\t   !hit(player.position.x+(player.width-1), player.position.y+player.jumpspeed)) {\n\t\t\t\tplayer.position.y+=player.jumpspeed;\n\n\t\t\t\t// jump with head against entity like questionmark\n\t\t\t\tif(question.contains(player.position.x, player.position.y) ||\n\t\t\t\t\tquestion.contains(player.position.x+(player.width-1), player.position.y)) {\n\t\t\t\t\t\tplayer.position.y = question.position.y+question.size.height;\n\t\t\t\t\t\tplayer.isJumping =true;\n\t\t\t\t\t\tplayer.jumpspeed=0;\n\t\t\t\t\t\tquestion.hit();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tplayer.position.y=Math.floor(player.position.y/16)*16;\n\t\t\t\tplayer.isJumping =true;\n\t\t\t\tplayer.jumpspeed=0;\n\t\t\t}\n\n\t\t} else { //falling\n\t\t\t// kinda tricky: test wether on cloud by checking wether the old y pos was not on cloud\n\t\t\t// we know two things at this poing: we are falling down AND if the previous pos\n\t\t\t// of the bottom sprite was not on cloud we crossed the cloud from top!!! because\n\t\t\t// we can jump max 16 pixel at once!\n\t\t\tvar isOnCloud = (onCloud(player.position.x, player.position.y+(player.height-1)+player.jumpspeed) &&\n\t\t\t            !onCloud(player.position.x, player.position.y+(player.height-1)) ||\n\t\t\t\t     onCloud(player.position.x+(player.width-1), player.position.y+(player.height-1)+player.jumpspeed) &&\n\t\t\t            !onCloud(player.position.x+(player.width-1), player.position.y+(player.height-1)));\n\t\t\t// console.log('falling');\n\n\t\t\tif(!hit(player.position.x, player.position.y+(player.height-1)+player.jumpspeed) &&\n\t\t\t   !hit(player.position.x+(player.width-1), player.position.y+(player.height-1)+player.jumpspeed) &&\n\t\t\t   !isOnCloud\n\t\t\t   ) {\n\t\t\t\tplayer.position.y+=player.jumpspeed;\n\n\t\t\t\t//move left against entity\n\t\t\t\tif(question.contains(player.position.x, player.position.y+(player.height-1)) ||\n\t\t\t\t\tquestion.contains(player.position.x+(player.width-1), player.position.y+(player.height-1) )) {\n\t\t\t\t\t\tplayer.position.y = question.position.y-player.height;\n\t\t\t\t\tplayer.isJumping = false;\n\t\t\t\t\t\tplayer.animation ='standing.left';\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t// platform check\n\n\t\t\t\tfor(var i=0; i<platforms.length;i++) {\n\t\t\t\t\tif(player.position.y+(player.height-1) >= platforms[i].position.y) {\n\t\t\t\t\t\tif(platforms[i].contains(player.position.x, player.position.y + (player.height-1)) ||\n\t\t\t\t\t\tplatforms[i].contains(player.position.x+player.width-1, player.position.y + (player.height-1))) {\n\t\t\t\t\t\t\tplayer.position.y = platforms[i].position.y-player.height;\n\t\t\t\t\t\tplayer.isJumping = false;\n\t\t\t\t\t\tplayer.animation ='standing.left';\n\t\t\t\t\t\tplayer.platform = platforms[i];\n\t\t\t\t\t\t//console.log('standing');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(onSlope(player.position.x+Math.floor(player.width/2), player.position.y+(player.height-1))){\n\t\t\t\t\t// WRONG HNADLING, if go down dont fall in the beginning but use the midpoint to slide\n\t\t\t\t\tvar dist = Math.floor(player.position.x)+Math.floor(player.width/2)-\n\t\t\t\t\t\tMath.floor((Math.floor(player.position.x)+Math.floor(player.width/2))/16)*16;\n\t\t\t\t\t\t\t//console.log(dist);\n\t\t\t\tplayer.isJumping =false;\n\t\t\t\tplayer.position.y = Math.floor((Math.floor(player.position.y)+(player.height-1))/16)*16-dist+1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tplayer.position.y = Math.floor((player.position.y+(player.height-1)+player.jumpspeed)/16)*16 -player.height;\n\t\t\t\tplayer.isJumping =false;\n\t\t\t\t\tif(player.animation=='jumping.left')\n\t\t\t\t\tplayer.animation ='standing.left';\n\t\t\t\t\telse\n\t\t\t\t\tplayer.animation ='standing.right';\n\t\t\t}\n\n\t\t}\n\t}\n\n}\n\n\n\t/**\n\t * intersection test for coins!\n\t */\n\n\n\tfor(var i = 0; i < coinCollection.size(); i++) {\n\t\tif(!coinCollection.get(i).collected && player.intersects(coinCollection.get(i))) {\n\n\t\t\tcoinCollection.get(i).collect();\n\t\t\tplayer.coins++;\n\n\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().COIN.pause();\n\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().COIN.currentTime = 0.0;\n\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().COIN.play();\n\t\t}\n\t}\n\n\tfor(var i = 0; i < monsterCollection.size(); i++) {\n\t\tmonsterCollection.get(i).update();\n\t\tmonsterCollection.get(i).collides(player);\n\t}\n\n\tfor(var i = 0; i < fireballs.length; i++) {\n\t\tif(fireballs[i].inactive ==false)\n\t\tfireballs[i].update();\n\t}\n\n\tgoomba.update();\n\tgoomba.collides(player);\n\n\tjumper.update();\n\tjumper.collides(player);\n\tknall.update();\n\tflame.update();\n\tflame2.update();\n\n\t\t\tif(flame.collides(player) && !player.dead) {\n\t\t\t\tplayer.dead=true;\n\t\t\t\t//console.log(\"dead\");\n\t\t\t\tplayer.animation='dieing';\n\t\t\t\tplayer.deathTime = timer.now;\n\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND.pause();\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.pause();\n\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.currentTime = 0.0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.play();\n\t\t\t}\n\n\t\t\t//moveMushroom(mush);\n\t\t\tmush.update();\n\n\t\t\tif(mush.intersects(player) && mush.active==true) {\n\t\t\t\t//console.log(\"mush active :\" +mush.xpos + \",\"+mush.ypos+\",\"+player.xpos + \",\"+player.ypos);\n   \t\t\t\tmush.active=false;\n   \t\t\t\tplayer.lives++;\n\n   \t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().ONE_UP.pause();\n\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().ONE_UP.currentTime = 0.0;\n\t\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().ONE_UP.play();\n   \t\t\t}\n   \t\t\t//console.log(\"mush active :\" +mush.active);\n\n\tif(Math.floor(player.position.y/16)<13 && Math.floor(player.position.y/16)>0 &&\n\t   Math.floor(player.position.x/16)<world[0].length && Math.floor(player.position.x/16)>0) {\n\t\tvar tileId = world[Math.floor(player.position.y/16)][Math.floor(player.position.x/16)];\n\t\tvar tile = TileSet[tileId];\n\n\t\tif(tile.tileType ==TileType.LAVA && !player.dead) {\n\t\t\tplayer.dead=true;\n\t\t\tplayer.animation='dieing';\n\t\t\tplayer.deathTime = timer.now;\n\t\t\tplayer.lives--;\n\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND.pause();\n\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.pause();\n\n\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.currentTime = 0.0;\n\t\t\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().DIED.play();\n\n\t\t}\n\t}\n \t//console.log(\"monster count: \" + monsterCollection.size());\n}\n\n//var centerx = GameEngine.width/2;\n\n/**\n * maybe render like a normal level but with scale and mod to loop????\n */\nfunction renderBackground() {\n\n\t// compute visible start and end tiles\n\tvar levelWidth = 16*world[0].length; // level width in pixel\n\tvar centerx = Math.min(Math.max(GameEngine.width/2,player.position.x),levelWidth -GameEngine.width/2);\n\n\tvar startx = Math.max(((centerx*0.25/16)|0)-2, 0);\n\tvar endx   = Math.min(((centerx*0.25/16)|0)+15,world[0].length); // length = width in tiles\n\n\t// render background\n\tcontext.setTransform(1,0,0,1,-((centerx*0.25) | 0)+(GameEngine.width/2*0.25)+(xShutter),0+(yShutter));\n\n\tfor(var x=startx; x <endx; x++) {\n\t\tfor(var y=0; y < 12; y++) {\n\t\t\tTileSet[background[(y%background.length)|0][(x%background[0].length)|0]].draw(x*16, y*16);\n\t\t}\n\t}\n\n}\n/**\n * Optimizations:\n * - dont draw items outside the screen!\n * - round with \" | 0\" insteatd of using Math.floor or Math.round\n * - Dont scale images in drawImage https://hacks.mozilla.org/2013/05/optimizing-your-javascript-game-for-firefox-os/\n *\n */\nvar timeCountDown = 0;\nvar xShutter;\nvar yShutter;\n\nfunction draw() {\n\t/*\n\tcontext.fillStyle = \"#111111\";\n\tcontext.fillRect(0, 0, 160*2, 120*2);\n\t*/\n\t//clear\n\n\tvar levelWidth = 16*world[0].length; // level width in pixel\n\n\t// stomper shutter\n\tvar time2 = timer.now;\n\tvar damp = 1.0-_Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].fastCosineInterpolate(hitTime, hitTime+550, time2);\n\txShutter = (3*sinLookupTable[((time2*5.4)|0)&0x1ff]*damp)|0;\n\tyShutter = (3*sinLookupTable[((time2*6.3)|0)&0x1ff]*damp)|0;\n\n\t// compute the center of the screen in level coordinates based on the\n\t// players x position. the center coord is clamped so the level bounds are\n\t// never overstepped. based on that value the level is transformed.\n\tvar centerx = Math.min(Math.max(GameEngine.width/2,player.position.x),levelWidth -GameEngine.width/2);\n\t//var targetx = Math.min(Math.max(GameEngine.width/2,player.xpos),levelWidth -GameEngine.width/2);\n\t// use easing\n\t// http://www.somethinghitme.com/2013/11/13/snippets-i-always-forget-movement/\n\t//centerx += (targetx - centerx)/5.5;\n\tcontext.fillStyle = \"#000000\";\n\tcontext.fillRect(0,0,GameEngine.width, GameEngine.height-32);\n\n\n\trenderBackground();\n\t//transform second background\n\t//seems setTransform is faster according to jsperf\n\t//context.save();\n\t//--context.setTransform(1,0,0,1,-Math.round(centerx*0.25)+(GameEngine.width/2*0.25),0);//-player.ypos+(240/2));\n\t//context.translate(-(((centerx)*0.25)|0)+(GameEngine.width/2*0.25),0);//-player.ypos+(240/2));\n\t//--context.drawImage(back2.image,xShutter,yShutter);\n\t//context.restore();\n\n\t//transform first background\n\t//**context.setTransform(1,0,0,1,-Math.round(centerx*0.5)+(GameEngine.width/2*0.5),0);//-player.ypos+(240/2));\n\t//**context.drawImage(back.image,xShutter,yShutter);\n\n\n\t//transform level\n\tcontext.setTransform(1,0,0,1,-(centerx | 0)+(GameEngine.width/2)+(xShutter),0+(yShutter));//-player.ypos+(240/2));\n\n\tflame.draw();\n\tflame2.draw();\n\n\t//compuete visible part of the world array\n\tvar startx = Math.max(((centerx/16)|0)-8, 0);\n\tvar endx   = Math.min(((centerx/16)|0)+9,world[0].length); // length = width in tiles\n\n\t// render level\n\tfor(var x=startx; x <endx; x++) {\n\t\tfor(var y=0; y < 12; y++) {\n\t\t\tTileSet[world[y][x]].draw(x*16, y*16);\n\t\t}\n\t}\n\n\n\tfor(var i = 0; i < monsterCollection.size(); i++) {\n\t\tmonsterCollection.get(i).draw();\n\t}\n\n\n\n\n\n\n\tlaserBall.draw();\n\tgoomba.draw();\n\tjumper.draw();\n\tfor(var i=0; i < platforms.length; i++) {\n\t\tplatforms[i].draw();\n\t}\n\n\n\tfor(var i=0; i < fireballs.length; i++) {\n\t\tif(fireballs[i].inactive ==false)\n\t\tfireballs[i].draw();\n\t}\n\n\tknall.draw();\n\n\tplayer.draw(context);\n\n\n\n\n\nif(mush.active) {\n\t\tmush.draw();\n\t}\n\n\tquestion.draw();\n\n\t// draw player\n\tfor(var i=0; i < coinCollection.size(); i++) {\n\t\tif(coinCollection.get(i).visible) {\n\t\t\tcoinCollection.get(i).draw();\n\t\t}\n\t}\n\tcontext.setTransform(1,0,0,1,0,0);\n\n\n\n\n\t/*if(player.dead) {\n\n\t\tcontext.globalAlpha=0.75;\n\t\tcontext.fillStyle = \"#333333\";\n\t\tcontext.fillRect(16*4.5,16*4.5,GameEngine.width-2*16*4.5,GameEngine.height-2*16*5.5);\n\t\tcontext.globalAlpha=1.0;\n\t\tdrawText((GameEngine.width/2)-Math.floor((9*9)/2),16*12/2-4,\"GAME OVER\");\n\t}*/\n\n\t// print points\n\n\n\t\t//context.fillStyle = \"#000000\";\n\t\t// draw status display\n\t//context.fillRect(0,GameEngine.height-32,GameEngine.width,GameEngine.height);\n\tcontext.drawImage(display,0,GameEngine.height-32);\n\n\tdrawText(144, 199, _Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].prefixInteger(player.coins, 2));\n\tdrawText(40, 207, _Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].prefixInteger(player.lives, 2));\n\tdrawText(64, 207, _Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].prefixInteger(player.points, 7));\n\n\tif(timeOld!=time)\n\t\ttimeCountDown = time;\n\n\tdrawText(136, 207, _Util__WEBPACK_IMPORTED_MODULE_11__[\"Util\"].prefixInteger(timeCountDown, 3));\n\n\n\t\t//drawText((GameEngine.width/2)-Math.floor((9*9)/2),16*12/2-4,\"GAME OVER\");\n\t// draw backbuffer to frontbuffer\n\t//loader.draw();\n\n\t/**\n\t * BENCHMARK THOSE 2 OPTIONS*/\n\tcontext2.drawImage(canvas2,0,0,GameEngine.width*GameEngine.scale,GameEngine.height*GameEngine.scale);\n\n\t//var data = context.getImageData(0,0,\n\n\n//context2.fillStyle = \"#FF0000\";\n/*\nfor(var i=0; i < touchPoints.length; i++)\n\t\tcontext2.fillRect(touchPoints[i].x-16, touchPoints[i].y-16,32, 32 );\n\n\tcontext2.globalAlpha=0.75;\n\tcontext2.beginPath();\n        context2.arc(50, 400, 50, 0, 2 * Math.PI, false);\n\tcontext2.arc(50+100, 400, 50, 0, 2 * Math.PI, false);\n\tcontext2.arc(jumpButton.xpos,jumpButton.ypos, jumpButton.radius, 0, 2 * Math.PI, false);\n        context2.fillStyle = 'green';\n        context2.fill();\n\tcontext2.globalAlpha=1.0;\n*/\n}\n\nvar leftButton = {\n\txpos:  50,\n\typos: 400,\n\tradius: 50\n\n};\n\nvar rightButton = {\n\txpos:  150,\n\typos: 400,\n\tradius: 50\n\n};\n\nvar jumpButton = {\n\txpos:  450,\n\typos: 400,\n\tradius: 50\n\n};\n\n\n\n// just empty methods for touch support (later)\nfunction onTouchStart(event) {\n\n// http://www.html5rocks.com/de/mobile/touch/\nevent.preventDefault();\n\ttouchPoints = new Array();\n\tvar x,y;\n\n\tvar left = false;\n\tvar right = false;\n\tvar jump= false;\n\n\tfor(var i=0; i < event.touches.length; i++) {\n\t\tx = event.touches[i].pageX-canvas.offsetLeft;\n\t\ty = event.touches[i].pageY-canvas.offsetTop;\n\t\ttouchPoints[i] = {x: x,y:y};\n\t\tif(inButton(x, y, jumpButton)) {\n\t\t\tjump=true;\n\t\t}\n\n\t\tif(inButton(x, y, leftButton)) {\n\t\t\tleft=true;\n\t\t}\n\n\t\tif(inButton(x, y, rightButton)) {\n\t\t\tright=true;\n\t\t}\n\t}\n\n\tKeyboard.pressed[Keyboard.CTRL] = jump;\n\tKeyboard.pressed[Keyboard.LEFT] = left;\n\tKeyboard.pressed[Keyboard.RIGHT] = right;\n\n\t//console.log(touchpos.x + \", \" + touchpos.y);\n\n}\n\nfunction inButton(x, y, button) {\n\tvar deltaX = x - button.xpos;\n\tvar deltaY = y - button.ypos;\n\treturn Math.sqrt((deltaX * deltaX) + (deltaY * deltaY)) < button.radius;\n}\n\n\n\n\nfunction onTouchMove(event) {\n\tevent.preventDefault();\n\tvar x,y;\n\tvar left = false;\n\tvar right = false;\n\tvar jump= false;\n\n\tfor(var i=0; i < event.touches.length; i++) {\n\t\tx = event.touches[i].pageX-canvas.offsetLeft;\n\t\ty = event.touches[i].pageY-canvas.offsetTop;\n\t\ttouchPoints[i] = {x: x,y:y};\n\t\tif(inButton(x, y, jumpButton)) {\n\t\t\tjump=true;\n\t\t}\n\n\t\tif(inButton(x, y, leftButton)) {\n\t\t\tleft=true;\n\t\t}\n\n\t\tif(inButton(x, y, rightButton)) {\n\t\t\tright=true;\n\t\t}\n\t}\n\n\tKeyboard.pressed[Keyboard.CTRL] = jump;\n\tKeyboard.pressed[Keyboard.LEFT] = left;\n\tKeyboard.pressed[Keyboard.RIGHT] = right;\n}\n\nfunction onTouchEnd(event) {\nevent.preventDefault();\n\n\n\t//touchPoints = new Array();\n\tvar x,y;\n\tvar left = false;\n\tvar right = false;\n\tvar jump= false;\n\n\tfor(var i=0; i < event.touches.length; i++) {\n\t\tx = event.touches[i].pageX-canvas.offsetLeft;\n\t\ty = event.touches[i].pageY-canvas.offsetTop;\n\t\ttouchPoints[i] = {x: x,y:y};\n\t\tif(inButton(x, y, jumpButton)) {\n\t\t\tjump=true;\n\t\t}\n\n\t\tif(inButton(x, y, leftButton)) {\n\t\t\tleft=true;\n\t\t}\n\n\t\tif(inButton(x, y, rightButton)) {\n\t\t\tright=true;\n\t\t}\n\t}\n\n\tKeyboard.pressed[Keyboard.CTRL] = jump;\n\tKeyboard.pressed[Keyboard.LEFT] = left;\n\tKeyboard.pressed[Keyboard.RIGHT] = right;\n\n}\n\n\nfunction myFunction() {\n\tcanvas = document.getElementById('canvas');\n\tcanvas.width = GameEngine.width*GameEngine.scale;\n\tcanvas.height = GameEngine.height*GameEngine.scale;\n\tcanvas.style.border   = \"1px solid #000000\";\n\tcanvas.style.opacity = 1;\n\n\tcanvas2 = document.createElement('canvas');\n\tcanvas2.width=GameEngine.width;\n\tcanvas2.height=GameEngine.height;\n\n\tcontext = canvas2.getContext(\"2d\");\n\n\tcontext2 = canvas.getContext(\"2d\");\n\t// disable smoothing\n\tcontext2.webkitImageSmoothingEnabled = false;\n\tcontext2.mozImageSmoothingEnabled = false;\n\tcontext2.imageSmoothingEnabled = false;\n\n\n\n\tmario = new Image();\n\tmario.src = __webpack_require__(/*! ./assets/images/mario.png */ \"./src/assets/images/mario.png\");\n\n\tdisplay = new Image();\n\tdisplay.src = __webpack_require__(/*! ./assets/images/display.png */ \"./src/assets/images/display.png\");\n\n\tplayer.debugMode = false;\n\n\t// is touch devise??\n\tvar isTouchable = true;// 'createTouch' in document;\n\n\tif(isTouchable) {\n\t\tcanvas.addEventListener('touchstart', onTouchStart, false);\n\t\tcanvas.addEventListener('touchmove', onTouchMove, false);\n\t\tcanvas.addEventListener('touchend', onTouchEnd, false);\n\t}\n\n\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().LEVEL_BEGIN.play();\n\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND.loop = true;\n\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND.volume = 0.1;\n\tObject(_SoundManager__WEBPACK_IMPORTED_MODULE_9__[\"SoundManager\"])().JUMP_SOUND.play();\n\n\t/*\n\tsetInterval(function() {\n\t\tupdate();\n\t\tdraw();\n\t}, 1000/GameEngine.fps);\n\n\t*/\n\n\n\n\twindow.addEventListener('keydown', function(event) { Keyboard.setKeyStatus(event, true); }, false);\n\twindow.addEventListener('keyup', function(event) { Keyboard.setKeyStatus(event, false); }, false);\n\n\tcontext.globalAlpha = \"1.0\";\n\n\t//console.log(myFunction);\n\t//throw new Error(\"Lame Mario clone!\");\n\t//console.log(JSON.stringify(world));\n\tstartTime = performance.now();\n\n\n//\t\tloadJSON(function(response) {\n//var jsonresponse = JSON.parse(response);\n//console.log(\"world\" + jsonresponse);\n//world = jsonresponse.level;\n//\t});\n\n\t// the loader does not work in chrome\n\t_Loader__WEBPACK_IMPORTED_MODULE_8__[\"Loader\"].getInstance().addCallback(\n\t\tfunction() {\n\t\t\tback = new _Image__WEBPACK_IMPORTED_MODULE_10__[\"Image2\"](__webpack_require__(/*! ./assets/images/back.png */ \"./src/assets/images/back.png\"));\n\t\t\ttiles = new _Image__WEBPACK_IMPORTED_MODULE_10__[\"Image2\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"));\n\t\t\tback2 = new _Image__WEBPACK_IMPORTED_MODULE_10__[\"Image2\"](__webpack_require__(/*! ./assets/images/back2.png */ \"./src/assets/images/back2.png\"));\n\t\t\tsetTimeout(function() {\n\t\t\t\tstartTime = performance.now();\n\t\t\t\tloop();\n\t\t\t}, 0);\n\t\t}\n\t);\n\n\n\n\tfont = new Image();\n\tfont.onload = function() {\n\t\t\t_Loader__WEBPACK_IMPORTED_MODULE_8__[\"Loader\"].getInstance().preload(\n\t\t\t\tnew _Image__WEBPACK_IMPORTED_MODULE_10__[\"Image2\"](__webpack_require__(/*! ./assets/images/mariotiles.png */ \"./src/assets/images/mariotiles.png\"), true),\n\t\t\t\tnew _Image__WEBPACK_IMPORTED_MODULE_10__[\"Image2\"](__webpack_require__(/*! ./assets/images/back.png */ \"./src/assets/images/back.png\"), true),\n\t\t\t\tnew _Image__WEBPACK_IMPORTED_MODULE_10__[\"Image2\"](__webpack_require__(/*! ./assets/images/back2.png */ \"./src/assets/images/back2.png\"), true)\n\t\t\t);\n\t};\n\n\tfont.src = __webpack_require__(/*! ./assets/images/font2.png */ \"./src/assets/images/font2.png\");\n\n//http://www.askyb.com/javascript/load-json-file-locally-by-js-without-jquery/\n}\n/*\nfunction loadJSON(callback) {\n\nvar xobj = new XMLHttpRequest();\nxobj.overrideMimeType(\"application/json\");\nxobj.open('GET', 'media/levels/level.json', true);\nxobj.onreadystatechange = function () {\nif (xobj.readyState == 4 && xobj.status == \"200\") {\n\n// .open will NOT return a value but simply returns undefined in async mode so use a callback\ncallback(xobj.responseText);\n\n}\n}\nxobj.send(null);\n\n}\n*/\nvar startTime = performance.now(); //Date.now();\nvar elapsedTime;\nvar currentTime = startTime;\nvar simulationCycles;\nvar cycleCount = 0;\nvar frameDelta = 1000/28; // 28 simulation steps each 1000 ms!\n\nfunction loop() {\n\t// http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\t// http://updates.html5rocks.com/2012/08/When-milliseconds-are-not-enough-performance-now\n\trequestAnimationFrame(loop);\n\n\tcurrentTime = performance.now();//Date.now();\n\telapsedTime = currentTime - startTime;\n\n\tsimulationCycles = ((elapsedTime / frameDelta) | 0) - cycleCount;\n\tcycleCount += simulationCycles;\n\n\tfor(var i = 0; i < simulationCycles; i++) {\n\t\tupdate();\n\t}\n\n\tif(simulationCycles > 0) {\n\t\tdraw();\n\t}\n}\n\nfunction toggleFullScreen() {\n  if (!document.fullscreenElement &&    // alternative standard method\n      !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {  // current working methods\n    if (document.body.requestFullscreen) {\n      document.body.requestFullscreen();\n    } else if (document.body.msRequestFullscreen) {\n      document.body.msRequestFullscreen();\n    } else if (document.body.mozRequestFullScreen) {\n      document.body.mozRequestFullScreen();\n    } else if (document.body.webkitRequestFullscreen) {\n      document.body.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n    }\n  } else {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    }\n  }\n}\n\n/*\n * Game.init\n *     .update\n *     .draw\n *\n */\n\nmyFunction();\n\n\n//# sourceURL=webpack:///./src/main.js?");

/***/ })

/******/ });